webpackJsonp([8],{"/YO8":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sy-home-index"},[s("sy-grad-4",{staticClass:"home-sy",attrs:{border:!1}},[s("div",{staticStyle:{"padding-top":"6px"},slot:"headerRight"},[s("el-select",{staticClass:"home-bigselect",attrs:{placeholder:"请选择年级"},on:{change:t.handleGradeChange},model:{value:t.queryList.gradeValue,callback:function(e){t.queryList.gradeValue=e},expression:"queryList.gradeValue"}},t._l(t.gradelist,function(t){return s("el-option",{key:t.gradeValue,attrs:{label:t.gradeName,value:t.gradeValue}})})),t._v(" "),s("el-select",{staticClass:"home-select",staticStyle:{margin:"0 10px"},attrs:{placeholder:"请选择班级"},on:{change:t.handleClzzChange},model:{value:t.queryList.clazzId,callback:function(e){t.queryList.clazzId=e},expression:"queryList.clazzId"}},t._l(t.classlist,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),s("el-select",{staticClass:"home-select",attrs:{placeholder:"请选择科目"},on:{change:t.handleCourseChange},model:{value:t.queryList.courseValue,callback:function(e){t.queryList.courseValue=e},expression:"queryList.courseValue"}},t._l(t.courselist,function(t){return s("el-option",{key:t.courseValue,attrs:{label:t.courseName,value:t.courseValue}})}))],1),t._v(" "),s("div",{staticStyle:{padding:"0 10px 10px"},slot:"bodyRight"},[s("div",{staticClass:"sy-home-flex"},[s("div",{staticClass:"home-left"},[s("div",{staticClass:"sy-home-flex"},[s("h3",[t._v("学生答疑")]),t._v(" "),s("p",{staticClass:"sy-home-pointer home-more",on:{click:t.handleMoreClick}},[t._v("更多")])]),t._v(" "),s("el-table",{staticClass:"home-table",attrs:{data:t.tableData,border:""}},[s("el-table-column",{attrs:{label:"序号",align:"center",width:"40",type:"index"}}),t._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"content",label:"问题描述",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"userName",label:"姓名",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"gradeName",label:"年级",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"className",label:"班级",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"resName",label:"资源名称",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"createTime",label:"创建时间",align:"center"}})],1)],1),t._v(" "),s("div",{staticClass:"home-right"},[s("h3",[t._v("课堂资源")]),t._v(" "),s("div",{staticClass:"home-circle"},t._l(t.progress,function(e){return s("div",{key:e.percentage,staticClass:"home-progress cp",on:{click:function(s){t.handleRClick(e)}}},[s("el-progress",{attrs:{type:"circle",percentage:e.percentage,width:"130","stroke-width":"25"}}),t._v(" "),s("p",[t._v(t._s(e.word))])],1)}))])]),t._v(" "),s("div",{staticClass:"home-bottom"},[s("el-row",[s("el-col",{attrs:{span:6}},[s("b",[t._v("学生人数")])]),t._v(" "),s("el-col",{staticClass:"right sy-home-pointer",attrs:{span:18}},[s("span",[t._v("选择时间段：")]),t._v(" "),s("span",{class:{"sy-theme-text":t.show[1]},on:{click:function(e){t.handleChangeDate("1")}}},[t._v("本周")]),t._v(" "),s("span",{staticStyle:{padding:"0 6px"}},[t._v(" | ")]),t._v(" "),s("span",{class:{"sy-theme-text":t.show[2]},on:{click:function(e){t.handleChangeDate("2")}}},[t._v("上周")]),t._v(" "),s("span",{staticStyle:{padding:"0 6px"}},[t._v(" | ")]),t._v(" "),s("span",{class:{"sy-theme-text":t.show[3]},on:{click:function(e){t.handleChangeDate("3")}}},[t._v("本月")]),t._v(" "),s("span",{staticStyle:{padding:"0 6px"}},[t._v(" | ")]),t._v(" "),s("span",{staticClass:"relative",class:{"sy-theme-text":t.show[4]},on:{click:function(e){t.handleChangeDate("4")}}},[s("span",[t._v(t._s(t.monthsName))]),t._v(" "),s("el-collapse-transition",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showNums,expression:"showNums"}],staticClass:"sy-parhome-bgbor parhome-tabs"},t._l(t.mList,function(e){return s("el-button",{key:e.value,staticClass:"parhome-button",attrs:{type:"text",disabled:!e.type,title:e.year+"年"},on:{click:function(s){s.stopPropagation(),t.handleClickM(e)}}},[t._v(t._s(e.month)+"月")])}))])],1)])],1),t._v(" "),s("div",{ref:"myChart",staticClass:"home-chart"})],1)])])],1)},staticRenderFns:[]}},AO6Y:function(t,e){},Uus3:function(t,e,s){"use strict";s.d(e,"a",function(){return r}),s.d(e,"e",function(){return o}),s.d(e,"b",function(){return l}),s.d(e,"c",function(){return c}),s.d(e,"d",function(){return u}),s.d(e,"f",function(){return h});var a=s("//Fk"),i=s.n(a),n=s("r6Pd"),r=function(){return new i.a(function(t,e){s.i(n.a)("get","api/base/grade/clazz/course",{}).then(function(s){200==s.status?t(s.data):e(s)}).catch(function(t){e(t)})})},o=function(t){return new i.a(function(e,a){s.i(n.a)("get","api/sl/select_catelog_count_than",t).then(function(t){200==t.status?e(t.data):a(t)}).catch(function(t){a(t)})})},l=function(t){return new i.a(function(e,a){s.i(n.a)("get","api/sl/select_student_questions",t).then(function(t){200==t.status?e(t.data):a(t)}).catch(function(t){a(t)})})},c=function(t){return new i.a(function(e,a){s.i(n.a)("post","api/sl/delete_student_questions",{ids:t}).then(function(t){200==t.status?e(t.data):a(t)}).catch(function(t){a(t)})})},u=function(){return new i.a(function(t,e){s.i(n.a)("get","api/sl/find_history_date",{}).then(function(s){200==s.status?t(s.data):e(s)}).catch(function(t){e(t)})})},h=function(t){return new i.a(function(e,a){s.i(n.a)("GET","api/sl/select_learning_count_statistics",t).then(function(t){200==t.status?e(t.data):a(t)}).catch(function(t){a(t)})})}},oqiz:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(10),i=s.n(a),n=s("Uus3");e.default={data:function(){return{progress:[{percentage:"0",word:"录播课堂"},{percentage:"0",word:"作业"},{percentage:"0",word:"微课"}],resource:{progress1:40,progress2:80,progress3:25},monthsName:"历史月份",showNums:!1,show:{1:!0,2:!1,3:!1,4:!1},mList:[],queryList:{gradeValue:"",clazzId:"",courseValue:""},gradelist:[],classlist:[],courselist:[],input2:"",activeName:"first",tableData:[],myCharts:null,option:{backgroundColor:"#fff",tooltip:{trigger:"axis",axisPointer:{type:"cross"}},toolbox:{show:!0,feature:{magicType:{type:["line","bar"]},saveAsImage:{show:!0,title:"下载",name:"学生学习时长统计"}}},xAxis:{type:"category",data:[],axisTick:{show:!1}},yAxis:{type:"value",axisTick:{show:!1},splitLine:{show:!1}},grid:{left:40,right:30,top:30,bottom:40},series:[]},paramsList:{gradeValue:"",classId:"",courseValue:"",dateType:1,month:void 0,year:void 0}}},created:function(){this.$parent.$emit("currentPage","/sl/home/home"),this.init()},methods:{init:function(){this.getModths(),this.getGradeClazzCoures()},getModths:function(){var t=this;s.i(n.d)().then(function(e){e&&e.forEach(function(t,e){t.isSelect=!1}),t.mList=e||[]})},getGradeClazzCoures:function(){var t=this;s.i(n.a)().then(function(e){t.gradelist=e||[],t.queryList.gradeValue=t.gradelist.length>0?t.gradelist[0].gradeValue:""})},handleGradeChange:function(t){var e=this;this.queryList.clazzId="",this.queryList.courseValue="",setTimeout(function(){for(var s=0;s<e.gradelist.length;s++)if(e.gradelist[s].gradeValue==t)return e.classlist=e.gradelist[s].clazzs||[],void(e.queryList.clazzId=e.classlist.length>0?e.classlist[0].id:"")},50)},handleClzzChange:function(t){var e=this;this.queryList.courseValue="",setTimeout(function(){for(var s=0;s<e.gradelist.length;s++)if(e.gradelist[s].gradeValue==e.queryList.gradeValue){var a=e.gradelist[s].clazzs;if(a)for(var i=0;i<a.length;i++)if(a[i].id==t)return e.courselist=a[i].courseListsVM||[],void(e.queryList.courseValue=e.courselist.length>0?e.courselist[0].courseValue:"");return}},50)},handleCourseChange:function(t){this.getKtRcList(),this.getStudentsQuestionList(),this.handleChangeDate("1")},getKtRcList:function(){var t=this;""!==this.queryList.courseValue&&""!==this.queryList.gradeValue&&s.i(n.e)({gradeValue:this.queryList.gradeValue,courseValue:this.queryList.courseValue}).then(function(e){for(var s in e)e[s]=parseFloat(e[s]);t.progress=[{percentage:e.microVideoCountThan,word:"录播课堂",type:5},{percentage:e.hwCountThan,word:"作业",type:2},{percentage:e.recordedCountThan,word:"微课",type:4}]}).catch(function(t){})},getStudentsQuestionList:function(){var t=this;""!==this.queryList.courseValue&&""!==this.queryList.clazzId&&""!==this.queryList.gradeValue&&s.i(n.b)({start:1,size:5,gradeValue:this.queryList.gradeValue,courseValue:this.queryList.courseValue,classId:this.queryList.clazzId}).then(function(e){t.tableData=e.list||[]}).catch(function(t){})},handleRClick:function(t){},handleClickM:function(t){t.isSelect=!0,this.monthsName=t.month+"月",this.showNums=!1,this.paramsList.year=t.year,this.paramsList.month=t.month,this.getTimers()},getTimers:function(){var t=this;s.i(n.f)(this.paramsList).then(function(e){t.drawChart(e)}).catch(function(t){})},handleChangeDate:function(t){for(var e in this.show)this.show[e]=t==e;this.paramsList.gradeValue=this.queryList.gradeValue,this.paramsList.classId=this.queryList.clazzId,this.paramsList.courseValue=this.queryList.courseValue,this.paramsList.dateType=t,"4"!=t?(this.monthsName="历史月份",this.paramsList.year=void 0,this.paramsList.month=void 0,this.getTimers()):this.showNums=!this.showNums},drawChart:function(t){var e=this,s=[],a=[];t&&t.forEach(function(t,e){s.push(t.monthAndDay),a.push(t.minute)}),this.myCharts.showLoading(),this.option.xAxis.data=s,this.option.series=[{name:"学习人数",data:a,type:"line"}],this.myCharts.setOption(this.option),setTimeout(function(){e.myCharts.hideLoading()},10)},handleMoreClick:function(){this.$router.push({path:"question"})}},mounted:function(){this.$refs.myChart&&(this.myCharts=i.a.init(this.$refs.myChart),this.myCharts.setOption(this.option))}}},rnut:function(t,e,s){var a=s("VU/8")(s("oqiz"),s("/YO8"),function(t){s("AO6Y")},"data-v-6a926472",null);t.exports=a.exports}});