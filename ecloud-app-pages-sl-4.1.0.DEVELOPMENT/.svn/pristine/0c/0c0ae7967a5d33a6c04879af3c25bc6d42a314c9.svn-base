webpackJsonp([1,5,19,20,34],{"0ALC":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sy-app-container"},[a("sy-grad-4",{attrs:{border:!1}},[a("div",{staticStyle:{"padding-top":"5px"},slot:"headerRight"},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},on:{change:e.handleGradeChange},model:{value:e.gradeId,callback:function(t){e.gradeId=t},expression:"gradeId"}},e._l(e.gradeOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.gradeName,value:e.id}})})),e._v(" "),a("el-select",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{placeholder:"请选择"},on:{change:e.handleCourseChange},model:{value:e.courseValue,callback:function(t){e.courseValue=t},expression:"courseValue"}},e._l(e.courseMap[e.gradeId],function(e){return a("el-option",{key:e.courseValue,attrs:{label:e.name,value:e.courseValue}})}))],1),e._v(" "),a("div",{slot:"bodyRight"},[a("div",{staticClass:"sy-sl-setting-box sy-theme-tableBorder"},[a("div",{staticClass:"sy-sl-setting-header sy-theme-tableBorder"},[a("div",{staticClass:"sy-sl-setting-body-left center sy-theme-extraLightGray sy-theme-tableBorder",staticStyle:{"border-bottom":"0"}},[e._v("教材目录")]),e._v(" "),a("div",{staticClass:"sy-sl-setting-body-right sy-theme-tableBorder sy-theme-extraLightGray",staticStyle:{"border-bottom":"0"}},[a("el-row",[a("el-col",{staticClass:"body-item center cp",attrs:{span:4}},[e._v("学习内容")]),e._v(" "),a("el-col",{staticClass:"body-item center cp",attrs:{span:10}},[e._v("资源名称（小于50个字）")]),e._v(" "),a("el-col",{staticClass:"body-item center cp",attrs:{span:10}},[e._v("上传文件")])],1)],1)]),e._v(" "),a("div",{staticClass:"sy-sl-setting-body"},[a("div",{staticClass:"sy-sl-setting-body-left sy-theme-tableBorder",staticStyle:{"overflow-y":"auto"}},[a("el-tree",{staticStyle:{border:"0",height:"100%"},attrs:{data:e.treeData,props:e.defaultProps,"highlight-current":"","default-expand-all":!1},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),a("div",{staticClass:"sy-sl-setting-body-right sy-theme-tableBorder"},[a("sy-grad-4",{attrs:{border:!1}},[a("div",{staticStyle:{overflow:"auto"},slot:"bodyRight"},e._l(e.data,function(t){return a("div",{key:t.type},e._l(t.data,function(i,s){return a("el-row",{key:s,staticClass:"sy-sl-setting-body-row"},[a("el-col",{staticClass:"body-item center",attrs:{span:4}},[e._v(e._s(0==s?""+t.name:" "))]),e._v(" "),a("el-col",{staticClass:"body-item center",attrs:{span:10}},[a("el-input",{attrs:{placeholder:"资源名称（小于50个字）"},model:{value:i.name,callback:function(e){i.name=e},expression:"row.name"}})],1),e._v(" "),a("el-col",{staticClass:"body-item center sy-import",attrs:{span:10}},[a("div",{staticClass:"sy-import-file-name el-input__inner cp",staticStyle:{width:"150px"},on:{click:function(a){e.handleOpenSelect(t,i)}}},[a("div",{staticClass:"sy-import-file-name-div",staticStyle:{width:"110px"}},[e._v(e._s(i.rcName))]),e._v(" "),a("span",{staticClass:"fa fa-folder-o"})]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:i.isSave?"success":""},on:{click:function(a){e.handleClick("save",s,i,t.data)}}},[e._v("\n                                                    "+e._s(i.isSave?"修改":"保存")+"\n                                                ")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleClick("delete",s,i,t.data)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.handleClick("add",s,i,t.data)}}},[e._v("添加")])],1)],1)}))}))])],1)])])])]),e._v(" "),a("sy-dialog",{attrs:{title:"请从资源库或者本地选择需要上传的资源",height:"160px",width:"400px",visible:e.rcDialog},on:{"update:visible":function(t){e.rcDialog=t}}},[a("div",{staticClass:"center",staticStyle:{padding:"40px 20px"},slot:"body"},[a("el-button",{staticStyle:{width:"100px"},attrs:{size:"small",type:"primary"},on:{click:function(t){e.openDialog("rc")}}},[e._v("资源库")]),e._v(" "),a("el-button",{staticStyle:{width:"100px"},attrs:{size:"small",type:"primary"},on:{click:function(t){e.rcUploadDialog=!0}}},[e._v("本地")])],1)]),e._v(" "),a("sy-dialog",{attrs:{title:"选择资源",height:"600px",width:"1000px",visible:e.rcSelectDialog},on:{"update:visible":function(t){e.rcSelectDialog=t}}},[a("div",{staticStyle:{padding:"0px"},slot:"body"},[e.rcSelectDialog?a("rc-list",{attrs:{select:e.examDefaultSelect,"grade-value":e.gradeValue,"course-value":e.courseValue},on:{select:e.getSelectExam}}):e._e()],1),e._v(" "),a("div",{staticClass:"right",slot:"footer"},[a("el-button",{attrs:{size:"small",type:""},on:{click:function(t){e.handleExamCtr("close")}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.handleExamCtr("ok")}}},[e._v("确定")])],1)]),e._v(" "),a("sy-dialog",{attrs:{title:"上传资源",height:"610px",width:"1024px",visible:e.rcUploadDialog},on:{"update:visible":function(t){e.rcUploadDialog=t}}},[a("div",{staticClass:"center",staticStyle:{padding:"0px"},slot:"body"},[e.rcUploadDialog?a("upload",{attrs:{data:e.uploadData},on:{"upload-submit":e.getSelectExam}}):e._e()],1)]),e._v(" "),a("sy-dialog",{attrs:{title:"选择试卷",height:"600px",width:"1000px",visible:e.examSelectDialog},on:{"update:visible":function(t){e.examSelectDialog=t}}},[a("div",{staticStyle:{padding:"0px"},slot:"body"},[e.examSelectDialog?a("exam-list",{attrs:{select:e.examDefaultSelect,"grade-value":e.gradeValue,"course-value":e.courseValue},on:{select:e.getSelectExam}}):e._e()],1),e._v(" "),a("div",{staticClass:"right",slot:"footer"},[a("el-button",{attrs:{size:"small",type:""},on:{click:function(t){e.handleExamCtr("close")}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.handleExamCtr("ok")}}},[e._v("确定")])],1)]),e._v(" "),a("sy-dialog",{attrs:{title:"选择作业",height:"600px",width:"1000px",visible:e.hwSelectDialog},on:{"update:visible":function(t){e.hwSelectDialog=t}}},[a("div",{staticStyle:{padding:"0px",overflow:"hiedden"},slot:"body"},[e.hwSelectDialog?a("hw-list",{attrs:{select:e.examDefaultSelect,"grade-value":e.gradeValue,"course-value":e.courseValue},on:{select:e.getSelectExam}}):e._e()],1),e._v(" "),a("div",{staticClass:"right",slot:"footer"},[a("el-button",{attrs:{size:"small",type:""},on:{click:function(t){e.handleExamCtr("close")}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.handleExamCtr("ok")}}},[e._v("确定")])],1)])],1)},staticRenderFns:[]}},"5Swp":function(e,t,a){var i=a("VU/8")(a("XRJc"),a("UvPD"),null,null,null);e.exports=i.exports},"6G3N":function(e,t,a){"use strict";var i=a("Dd8w"),s=a.n(i),l=a("mvHQ"),o=a.n(l),r=a("bOdI"),n=a.n(r),c=a("HU6I"),d=a("YE7g");t.a={name:"Upload",props:{data:{type:Object,default:{}}},data:function(){var e;return e={courseType:"type1",catalog:"点击选择",gradeValue:"",catalogId:"",schooltermType:"",stageId:"",isShowCatalogError:!1,catalogErrorText:"编目不能为空！",courses:[],courseValue:"",coursesDialog:!1,catalogTreeData:[],defaultChecked:[],emptyTextCatalogTree:"正在加载中...",treeNode:void 0,addNewBtn:!1,isExpendAll:!0,emptyText:"正在加载中...",objTable1:{resourceType:"",knowledge:"点击选择",knowledgeId:"",fileAuthor:"",fileName:"",uploadValue:"",percentage:"0",isShowProgress:!1,isShow:!1,fileId:"",fileType:"",suffix:"",fileSize:"",deleteColumnDisabled:"",isShowResourceTypeError:!1,isShowRcFileNameError:!1,isShowfileNameError:!1,resourceTypeErrorText:"资源分类不能为空！",rcFileNameErrorText:"为空！",isUploadBtn:!0,isErrorProgress:!1,isProgress:!1,fileNameErrorText:"请先上传文件!"},tableData1:[],currentColumn:c.a.currentColumn,rcTypess:[],tableDataIndexKnowledge:0,choseNnowledgelDialog:!1,nowledgelTreeData:[],nowledgelChecked:[],deleteColumnDialog:!1,uploadFileSize:0,uploadNumber:0,addColumnDisabled:!1,uploadText:"添加",tableDataIndex:0,tableDataKeys:{},isScuessUpload:{},uploadData:{serverid:"rc"},uploadAction:window.ShiYue.base+"/zuul/api/storage/upload",tableData2:c.a.tableData2,rcName:"",isShowRcNameError:!1},n()(e,"deleteColumnDialog",!1),n()(e,"column",""),n()(e,"authorName",this.$store.state.realName?this.$store.state.realName:"点击选择(只能有一个上传人)"),n()(e,"userId",this.$store.state.userId?this.$store.state.userId:""),n()(e,"isShowAuthorNameError",!1),n()(e,"checkList",[]),n()(e,"labelName","点击选择已有标签"),n()(e,"label",""),n()(e,"labels",[]),n()(e,"choseLabelDialog",!1),n()(e,"tag",""),n()(e,"jianjie",""),n()(e,"downloadControl","0"),n()(e,"sharedScope",2),n()(e,"isSubmitAndUpload",!1),n()(e,"isSubmitAndClose",!1),e},created:function(){this.getResourceTypeList(),this.getRoutineManage(),"{}"!=o()(this.data)&&(this.gradeValue=this.data.gradeValue,this.courseValue=this.data.courseValue,this.catalogId=this.data.id,this.catalog=this.data.name,this.schooltermType=this.data.schooltermType,this.stageId=this.data.stageId)},methods:{getRoutineManage:function(){var e=this;a.i(d.a)().then(function(t){t&&"ok"==t.code&&t.data?(e.uploadFileSize=t.data.uploadFileSize,e.uploadNumber=t.data.uploadNumber,e.uploadNumber<2&&(e.addColumnDisabled=!0)):e.addColumnDisabled=!0})},getResourceTypeList:function(){var e=this,t=[];a.i(d.b)("type1").then(function(a){a&&"ok"==a.code&&a.data&&a.data.length>0?(a.data.forEach(function(e){t.push({text:e.name,value:e.id})}),e.rcTypess=t,e.tableData1.push(e.objTable1),e.tableData1.forEach(function(t,a){e.tableData1[a].resourceType=e.rcTypess[0].value})):(e.tableData1.push(e.objTable1),e.rcTypess=[])})},choseCatalog:function(){var e=this;this.coursesDialog=!0,this.catalogTreeData=[],this.emptyText="正在加载中...",this.emptyTextCatalogTree="正在加载中...",this.addNewBtn=!1,this.courseValue?this.getCataloglList({courseValue:this.courseValue,gradeValue:this.gradeValue,schooltermType:this.term}):a.i(d.c)().then(function(t){t&&"ok"==t.code&&null==t.fieldErrors&&t.data&&t.data.length>0?(t.data.forEach(function(t){null!=t.parentId&&"course_type"!=t.type&&e.courses.push({value:t.value,name:t.name}),0==e.courses.length&&(e.emptyText="暂无数据",e.emptyTextCatalogTree="暂无数据")}),e.courseValue?e.courseValue&&e.getCataloglList({courseValue:e.courseValue,gradeValue:e.gradeValue,schooltermType:e.term}):e.courses.length>0&&a.i(d.d)({year:e.year?e.year:void 0,schoolTerm:e.term}).then(function(t){if(t&&200===t.status&&t.data&&t.data.length>0){for(var a=0;a<t.data.length;a++)for(var i=0;i<e.courses.length;i++)if(t.data[a].courseValue==e.courses[i].value)return e.courseValue=e.courses[i].value,e.curIndex=i,e.getCataloglList({courseValue:e.courseValue,gradeValue:e.gradeValue,schooltermType:e.term}),!1}else e.curIndex=0,e.courses.length>0&&(e.courseValue=e.courses[0].value,e.getCataloglList({courseValue:e.courseValue,gradeValue:e.gradeValue,schooltermType:e.term}))})):e.emptyText="暂无数据"})},courseName:function(e,t){this.curIndex=t,this.courseValue=e,this.getCataloglList({courseValue:this.courseValue,gradeValue:this.gradeValue,schooltermType:this.term})},getCataloglList:function(e){var t=this;this.defaultChecked=[],this.emptyTextCatalogTree="正在加载中...";var i=[];a.i(d.e)(e).then(function(e){if(e&&200==e.status&&e.data&&e.data.length>0){if(e.data.forEach(function(e){null!=e.parentId&&i.push({name:e.name,id:e.id,parentId:e.parentId,children:[],schooltermType:e.schooltermType,stageId:e.stageId,path:e.path,courseValue:e.courseValue,gradeValue:e.gradeValue,nocheck:!(e.path.split("/").length>2)})}),t.catalogTreeData=i,0==t.catalogTreeData.length)return t.emptyTextCatalogTree="暂无数据",!1;void 0==t.treeNode?t.defaultChecked=[]:t.catalogTreeData.forEach(function(e){e.id==t.treeNode.id&&t.defaultChecked.push(t.treeNode.id)})}else t.emptyTextCatalogTree="暂无数据"})},checkedCourses:function(e){this.treeNode=e.allCeckNodes[0]},submitCourses:function(){void 0==this.treeNode?(this.catalog="点击选择",this.catalogId="",this.isShowCatalogError=!0):(this.isShowCatalogError=!1,this.catalog=this.treeNode.name,this.catalogId=this.treeNode.id,this.schooltermType=this.treeNode.schooltermType,this.stageId=this.treeNode.stageId),this.addNewBtn=!0,this.coursesDialog=!1},resourceTypeChange:function(e){this.tableData1[e].resourceType!=this.rcTypess[0].value?this.tableData1[e].deleteColumnDisabled=!1:this.tableData1.length>1?this.tableData1[e].deleteColumnDisabled=!1:this.tableData1[e].deleteColumnDisabled=!0},choseNnowledge:function(e){var t=this;this.addNewBtn=!1,this.gradeValue?(this.choseNnowledgelDialog=!0,this.tableDataIndexKnowledge=e,this.knowpointTree=[],this.emptyText="正在加载中...",a.i(d.f)({unitId:this.$store.state.unitId,gradeValue:this.gradeValue,courseValue:this.courseValue}).then(function(e){t.nowledgelTreeData=[],e&&"ok"==e.code&&e.data&&e.data.length>0?(e.data.forEach(function(e){null!=e.parentPointId?t.nowledgelTreeData.push({id:e.id,name:e.name,parentId:e.parentPointId,children:[]}):t.nowledgelTreeData.push({id:e.id,name:e.name,parentId:e.parentPointId,children:[],nocheck:!0})}),t.tableData1[t.tableDataIndexKnowledge].knowledge?t.nowledgelChecked.push(t.tableData1[t.tableDataIndexKnowledge].knowledgeId):t.nowledgelChecked=[]):t.emptyText="暂无数据"})):this.$notify.info({title:"提示",message:"请先选择编目才能选择知识点"})},checkedNode:function(e){this.tableData1[this.tableDataIndexKnowledge].currentNode=e.allCeckNodes[0]},submitNnowledge:function(){void 0==this.tableData1[this.tableDataIndexKnowledge].currentNode?(this.tableData1[this.tableDataIndexKnowledge].knowledge="点击选择",this.tableData1[this.tableDataIndexKnowledge].knowledgeId="",this.$notify.info({title:"提示",message:"您没有选择知识点"})):"{}"!=o()(this.tableData1[this.tableDataIndexKnowledge].currentNode)&&(this.tableData1[this.tableDataIndexKnowledge].knowledge=this.tableData1[this.tableDataIndexKnowledge].currentNode.name,this.tableData1[this.tableDataIndexKnowledge].knowledgeId=this.tableData1[this.tableDataIndexKnowledge].currentNode.id),"点击选择"!=this.tableData1[this.tableDataIndexKnowledge].knowledge?this.tableData1[this.tableDataIndexKnowledge].deleteColumnDisabled=!1:this.tableData1[this.tableDataIndexKnowledge].deleteColumnDisabled=!0,this.choseNnowledgelDialog=!1,this.addNewBtn=!0},rcFileNameKeyupEnter:function(e){if(this.tableData1[e].fileName){this.rcName||(this.rcName=this.tableData1[e].fileName),this.tableData1[e].isShowRcFileNameError=!1;for(var t=0;t<this.tableData1.length;t++)if(e!=t){if(this.tableData1[e].fileName===this.tableData1[t].fileName){this.tableData1[e].isShowRcFileNameError=!0,this.tableData1[e].rcFileNameErrorText="重复";break}this.tableData1[e].isShowRcFileNameError=!1,this.tableData1[e].deleteColumnDisabled=!1}}else this.tableData1[e].isShowRcFileNameError=!0,this.tableData1[e].rcFileNameErrorText="为空!"},handleuPLOAD:function(e){this.tableDataIndex=1*e+1+"",this.tableData1[this.tableDataIndex-1].isShowProgress?this.tableData1[this.tableDataIndex-1].isShowProgress=!0:this.tableData1[this.tableDataIndex-1].isShowProgress=!1,this.tableData1[this.tableDataIndex-1].isErrorProgress?this.tableData1[this.tableDataIndex-1].isErrorProgress=!0:this.tableData1[this.tableDataIndex-1].isErrorProgress=!1},beforeUpload:function(e){return".mp4"!=/\.[^\.]+$/.exec(e.name)[0]?(this.tableData1[this.tableDataKeys[e.uid+""]-1].isShowfileNameError=!0,this.tableData1[this.tableDataKeys[e.uid+""]-1].fileNameErrorText="禁止上传此类型文件,只能上传mp4格式的文件",this.tableData1[this.tableDataKeys[e.uid+""]-1].isUploadBtn=!1,this.tableData1[this.tableDataKeys[e.uid+""]-1].isProgress=!1,this.tableData1[this.tableDataKeys[e.uid+""]-1].isErrorProgress=!0,!1):this.uploadFileSize<e.size/1048576?(this.tableData1[this.tableDataKeys[e.uid+""]-1].isErrorProgress=!0,this.tableData1[this.tableDataKeys[e.uid+""]-1].isShowfileNameError=!0,this.tableData1[this.tableDataKeys[e.uid+""]-1].isProgress=!1,this.tableData1[this.tableDataKeys[e.uid+""]-1].fileNameErrorText="上传的资源已超过设置的最大上传"+this.uploadFileSize+"MB",!1):void 0},submitUpload:function(e){var t=[];t.push(this.$refs[e][0].uploadFiles[this.$refs[e][0].uploadFiles.length-1]),this.$refs[e][0].uploadFiles=t,this.$refs[e][0].submit(),this.tableData1[e.split("_")[1]].percentage="0%",this.tableData1[e.split("_")[1]].isShowProgress=!1,this.tableData1[e.split("_")[1]].isUploadBtn=!1},onChange:function(e,t){if(!this.tableDataKeys[e.uid+""]&&!this.isScuessUpload[e.uid+""])return this.tableDataKeys[e.uid+""]=this.tableDataIndex,this.tableData1[this.tableDataKeys[e.uid+""]-1].uploadValue=e.name,this.tableData1[this.tableDataKeys[e.uid+""]-1].isShowfileNameError=!1,this.tableData1[this.tableDataKeys[e.uid+""]-1].isUploadBtn=!0,this.tableData1[this.tableDataKeys[e.uid+""]-1].isProgress=!1,this.tableData1[this.tableDataKeys[e.uid+""]-1].isErrorProgress=!1,this.tableData1[this.tableDataKeys[e.uid+""]-1].isShowProgress=!1,void(this.tableData1[this.tableDataKeys[e.uid+""]-1].uploadValue&&(this.tableData1[this.tableDataKeys[e.uid+""]-1].deleteColumnDisabled=!1))},onProgress:function(e,t){this.isScuessUpload[t.uid+""]=!1,this.tableData1[this.tableDataKeys[t.uid+""]-1].percentage=Math.round(t.percentage)+"%",this.tableData1[this.tableDataKeys[t.uid+""]-1].isShowProgress=!1,this.tableData1[this.tableDataKeys[t.uid+""]-1].isProgress=!0,this.tableData1[this.tableDataKeys[t.uid+""]-1].isUploadBtn=!1},onSuccess:function(e,t,a){this.tableData1[this.tableDataKeys[t.uid+""]-1].isShowProgress=!0,e&&"200"==e.status?(this.isScuessUpload[t.uid+""]=!0,e.data&&(this.tableData1[this.tableDataKeys[t.uid+""]-1].fileId=e.data.id,this.tableData1[this.tableDataKeys[t.uid+""]-1].fileType=e.data.fileType,this.tableData1[this.tableDataKeys[t.uid+""]-1].suffix=e.data.suffix,this.tableData1[this.tableDataKeys[t.uid+""]-1].fileSize=e.data.fileSize,this.$notify({title:"提示",message:"上传成功！",type:"success"}),this.tableData1[this.tableDataKeys[t.uid+""]-1].isShowfileNameError=!1,this.tableData1[this.tableDataKeys[t.uid+""]-1].isShowRcFileNameError=!1,this.tableData1[this.tableDataKeys[t.uid+""]-1].fileName||(this.tableData1[this.tableDataKeys[t.uid+""]-1].fileName=t.name),this.tableData1[this.tableDataKeys[t.uid+""]-1].fileName.length>50&&(this.tableData1[this.tableDataKeys[t.uid+""]-1].isShowRcFileNameError=!0,this.tableData1[this.tableDataKeys[t.uid+""]-1].rcFileNameErrorText="超过50个字"),this.rcName||(this.rcName=this.tableData1[this.tableDataKeys[t.uid+""]-1].fileName.match(/(.*)\.[^.]+/)[1],this.isShowRcNameError=!1),this.tableData1[this.tableDataKeys[t.uid+""]-1].isShowProgress=!0)):(this.tableData1[this.tableDataIndex-1].isProgress=!1,this.tableData1[this.tableDataKeys[t.uid+""]-1].isErrorProgress=!0,this.tableData1[this.tableDataKeys[t.uid+""]-1].fileName=""),this.tableData1[this.tableDataKeys[t.uid+""]-1].fileName?this.tableData1[this.tableDataKeys[t.uid+""]-1].deleteColumnDisabled=!1:this.tableData1[this.tableDataKeys[t.uid+""]-1].deleteColumnDisabled=!0},deleteColumn:function(e){this.column=e,this.deleteColumnDialog=!0},submitDeleteColumn:function(){this.uploadText="添加",this.$refs["upload_"+this.column][this.column].abort(),this.tableData1[this.column].isShowfileNameError=!1,this.tableData1[this.column].fileNameErrorText="请先上传文件!",this.tableData1[this.column].deleteColumnDisabled=!0,this.tableData1[this.column].isUploadBtn=!0,this.tableData1[this.column].isErrorProgress=!1,this.tableData1[this.column].isProgress=!1,this.tableData1.length>1?(this.tableData1.splice(this.column,1),this.tableData1.length<this.uploadNumber&&(this.addColumnDisabled=!1),1==this.tableData1.length&&(0!=this.column?this.tableData1[this.column-1].resourceType!=this.rcTypess[0].value||this.tableData1[this.column-1].knowledge||this.tableData1[this.column-1].fileAuthor||this.tableData1[this.column-1].fileName||this.tableData1[this.column-1].uploadValue?this.tableData1[this.column-1].deleteColumnDisabled=!1:this.tableData1[this.column-1].deleteColumnDisabled=!0:this.tableData1[this.column].resourceType!=this.rcTypess[0].value||this.tableData1[this.column].knowledge||this.tableData1[this.column].fileAuthor||this.tableData1[this.column].fileName||this.tableData1[this.column].uploadValue?this.tableData1[this.column].deleteColumnDisabled=!1:this.tableData1[this.column].deleteColumnDisabled=!0)):1==this.tableData1.length&&(this.tableData1[this.column].resourceType!=this.rcTypess[0].value||this.tableData1[this.column].knowledge||this.tableData1[this.column].fileAuthor||this.tableData1[this.column].fileName||this.tableData1[this.column].uploadValue)&&(this.tableData1[this.column].resourceType=this.rcTypess[0].value,this.tableData1[this.column].knowledge="点击选择",this.tableData1[this.column].fileAuthor="",this.tableData1[this.column].fileName="",this.tableData1[this.column].uploadValue="",this.tableData1[this.column].fileId="",this.tableData1[this.column].fileType="",this.tableData1[this.column].suffix="",this.tableData1[this.column].fileSize=""),this.deleteColumnDialog=!1},addColumn:function(){this.tableData1[this.tableData1.length-1].deleteColumnDisabled=!1;var e=this.tableData1[this.tableData1.length-1];this.tableData1.length<this.uploadNumber&&(this.addColumnDisabled=!1,this.tableData1.push({resourceType:e?e.resourceType:"",knowledge:"点击选择",fileAuthor:"",fileName:"",knowledgeId:"",uploadValue:"",percentage:"0",isShowProgress:!1,isShow:!1,fileId:"",fileType:"",suffix:"",fileSize:"",isShowResourceTypeError:!1,isShowRcFileNameError:!1,isShowfileNameError:!1,resourceTypeErrorText:"资源分类不能为空！",rcFileNameErrorText:"为空！",isUploadBtn:!0,isErrorProgress:!1,isProgress:!1,fileNameErrorText:"请先上传文件!"}),this.tableData1.length==this.uploadNumber&&(this.addColumnDisabled=!0,this.uploadText="已达最大增加数",this.$notify.info({title:"提示",message:"已达到增加资源的最大"+this.uploadNumber+"条限制条数"})))},choseUploadUser:function(){var e=this,t=[];t.push(this.userId),this.$SelectUsers({selectUserType:2,unitId:this.$store.state.unitId,selectUserIds:t},function(t,a){if(t.length>1)return e.$notify({title:"警告",message:"最多选择一个上传人！",type:"warning"}),!0;1==t.length?(e.authorName=t[0].realName,e.userId=t[0].id,e.isShowAuthorNameError=!1):(e.userId="",e.authorName="点击选择",e.isShowAuthorNameError=!0)})},getLabelList:function(){var e=this;this.labels=[],this.emptyText="正在加载中...",a.i(d.g)().then(function(t){if(t&&"200"==t.status&&t.data&&t.data.length>0){var a=[],i=[];t.data.forEach(function(t){e.labels.push({id:t.id,name:t.name}),e.checkList&&e.checkList.length>0&&e.checkList.forEach(function(e){e==t.id&&(a.push(t.name),i.push(t.id))})}),e.labelName=a.join(","),e.label=i.join(",")}else e.emptyText="暂无数据";e.addNewBtn=!1})},choseLabel:function(){this.choseLabelDialog=!0,this.getLabelList()},submitLabel:function(){var e=this,t=[];this.checkList&&this.checkList.length>0?(this.checkList.forEach(function(a){t.push(_.find(e.labels,{id:a}))}),this.labelName=_.map(t,"name").join(","),this.label=this.checkList.join(","),this.choseLabelDialog=!1):(this.labelName="",this.label="",this.choseLabelDialog=!1,this.$notify.info({title:"提示",message:"您没有选择任何标签"}))},_init:function(){this.treeNode=void 0,this.curIndex=0,this.cValue||(this.courseValue=""),this.cId||(this.catalog="点击选择",this.catalogId=""),this.defaultChecked=[],this.nowledgelChecked=[],this.tableData1=[],this.tableData1.push({resourceType:this.rcTypess.length>0?this.rcTypess[0].value:"",knowledge:"点击选择",knowledgeId:"",fileAuthor:"",fileName:"",uploadValue:"",percentage:"0",isShowProgress:!1,isShow:!1,fileId:"",fileType:"",suffix:"",fileSize:"",deleteColumnDisabled:"",isShowResourceTypeError:!1,isShowRcFileNameError:!1,isShowfileNameError:!1,resourceTypeErrorText:"资源分类不能为空！",rcFileNameErrorText:"为空！",isUploadBtn:!0,isErrorProgress:!1,isProgress:!1,fileNameErrorText:"请先上传文件!"}),this.rcName="",this.authorName=this.$store.state.realName,this.labelName="点击选择已有标签",this.checkList=[],this.label="",this.labels=[],this.tag="",this.jianjie="",this.authorName=this.$store.state.realName?this.$store.state.realName:"点击选择(只能有一个上传人)",this.userId=this.$store.state.userId?this.$store.state.userId:"",this.downloadControl="0"},saveBaseRc:function(e,t){var i=this;a.i(d.h)(e,t).then(function(e){"error"==e||"200"!=e.status?i.$notify.error({rcName:"错误",message:"上传资源出错"}):"200"==e.status&&(i.$notify({title:"成功",message:"提交并上传成功",type:"success"}),i.$emit("upload-submit",{id:e.data,name:i.rcName}))})},uploadValidate:function(){var e=this;"点击选择"==this.catalog&&(this.isShowCatalogError=!0),this.rcName||(this.isShowRcNameError=!0),"点击选择"==this.authorName&&(this.isShowAuthorNameError=!0);var t={};this.tableData1.forEach(function(a,i){a.resourceType||(e.tableData1[i].isShowResourceTypeError=!0),a.fileName?a.fileName.length>50&&(e.tableData1[i].isShowRcFileNameError=!0,e.tableData1[i].rcFileNameErrorText="超过50个字"):e.tableData1[i].isShowRcFileNameError=!0,a.fileId||(e.tableData1[i].isShowfileNameError=!0),t["files["+i+"].resourceType"]=a.resourceType,t["files["+i+"].fileName"]=a.fileName,t["files["+i+"].fileId"]=a.fileId,t["files["+i+"].suffix"]=a.suffix,t["files["+i+"].fileType"]=a.fileType,t["files["+i+"].fileSize"]=a.fileSize,t["files["+i+"].knowledgeId"]=a.knowledgeId,t["files["+i+"].fileAuthor"]=a.fileAuthor});var a=s()({courseType:this.courseType,publicId:this.courseType,catalogId:this.catalogId,gradeValue:this.gradeValue,courseValue:this.courseValue,termValue:this.schooltermType,stageId:this.stageId,"detailedVM.brief":this.jianjie?this.jianjie:"",createUser:this.userId,userName:this.authorName,resTag:this.tag,labels:this.label,name:this.rcName,"detailedVM.downloadControl":this.downloadControl,sharedScope:this.sharedScope,appId:this.$route.query.topicId,appPk:this.$route.query.appPk},t),i=0;if(this.rcName&&this.authorName)for(var l=0;l<this.tableData1.length;l++)this.tableData1[l].resourceType&&this.tableData1[l].fileName&&this.tableData1[l].fileName.length<=50&&this.tableData1[l].fileId&&i++;if(i==this.tableData1.length&&"点击选择"!=this.catalog)return a},submitAndUpload:function(){var e=this.uploadValidate();e&&this.saveBaseRc(e)}}}},"7hSk":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sy-app-container"},[a("sy-grad-4",{attrs:{border:!1}},[a("div",{staticClass:"not_weight",staticStyle:{"padding-top":"5px"},slot:"headerRight"},[a("span",[e._v("资源类型：")]),e._v(" "),a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:e.form.resourceTypeId,callback:function(t){e.form.resourceTypeId=t},expression:"form.resourceTypeId"}},[a("el-option",{attrs:{label:"全部类型",value:""}}),e._v(" "),e._l(e.options.resourceType,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})],2),e._v(" "),a("el-input",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"资源名称、上传人、标签",maxlength:50},model:{value:e.form.keyWord,callback:function(t){e.form.keyWord=t},expression:"form.keyWord"}}),e._v(" "),a("el-button",{attrs:{icon:"search"},on:{click:e.handleSeacher}},[e._v("查询")])],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageloading,expression:"pageloading"}],staticStyle:{padding:"0 10px",overflow:"auto"},attrs:{"element-loading-text":"拼命加载中..."},slot:"bodyRight"},[a("el-table",{staticStyle:{width:"100%",height:"100%"},attrs:{data:e.searchContent,border:"",stripe:"",height:"100%"},on:{"row-click":e.toDetails}},[a("el-table-column",{attrs:{align:"center",width:"40"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{staticClass:"radio",attrs:{label:t.row.id},on:{change:e.handleChange},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(""))])]}}])}),e._v(" "),e._l(e.column,function(t){return a("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,width:t.width,align:t.align},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",{staticStyle:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[1==i.row.recommend&&"name"===t.prop?a("b",{staticClass:"sy-hot-rc"},[e._v("荐")]):e._e(),e._v(" "),a("span",{staticClass:"sy-rc-items"},[e._v(e._s(i.row[t.prop]))])])]}}])})}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.hanldeView(t.row)}}},[e._v("预览")])]}}])})],2)],1),e._v(" "),a("div",{slot:"footer"},[a("el-pagination",{staticClass:"pagination-mf",attrs:{"current-page":e.form.start,"page-size":e.form.size,layout:"total, prev, pager, next",total:e.form.total},on:{"current-change":e.handleCurrentChange}})],1)])],1)},staticRenderFns:[]}},EJBL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("//Fk"),s=a.n(i),l=a("sjUf");t.default={props:{gradeValue:{type:String,default:""},courseValue:{type:String,default:""},select:{type:String,default:""},term:{type:String,default:""},categoryId:{type:String,default:""}},data:function(){return{radio:this.select||"",currentValue:"100",emptyText:" ",column:[{prop:"name",label:"资源名称",align:"left",width:""},{prop:"thumbsUp",label:"点赞次数",align:"center",width:"100"},{prop:"downloadNum",label:"下载次数",align:"center",width:"100"},{prop:"clickNum",label:"阅读次数",align:"center",width:"100"},{prop:"publishTime",label:"发布时间",align:"center",width:"150"}],multipleSelection:[],form:{resourceTypeId:"",sorts:1,fileFormat:"2",courseTypeCode:"type1",KnowledgePointId:"",start:1,size:30,keyWord:"",total:0},data:[],searchContent:[],pageloading:!1,Userloading:!1,options:{resourceType:[]},treeTopTabsValue:"1"}},created:function(){this.init()},methods:{init:function(){this.getTypes(),this.getList()},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},getTypes:function(){var e=this;return new s.a(function(t,i){a.i(l.a)({unitId:e.$store.state.unitId,code:e.form.courseTypeCode}).then(function(a){e.options.resourceType=a.data||[],t(a)}).catch(function(e){i(e)})})},checkeZero:function(e){return e||0==e?e:void 0},getList:function(e){var t=this;a.i(l.b)({unitId:this.$store.state.unitId,courseTypeCode:this.form.courseTypeCode,sort:this.form.sorts,keyword:this.form.keyword||void 0,fileFormat:this.form.fileFormat||void 0,categoryId:this.categoryId||void 0,KnowledgePointId:this.form.KnowledgePointId||void 0,courseValue:this.checkeZero(this.courseValue),resourceTypeId:this.form.resourceTypeId||void 0,term:this.term||void 0,gradeValue:this.checkeZero(this.gradeValue),start:this.form.start,size:this.form.size}).then(function(e){t.pageLoading=!1,e.data&&e.data.list&&e.data.list.forEach(function(e,a){e.type=t.form.courseTypeCode}),t.searchContent=e.data.list,t.form.total=e.data.total}).catch(function(e){t.pageLoading=!1})},handleSelectionChange:function(e){this.multipleSelection=e},handleCurrentChange:function(e){this.form.start=e,this.getList(this.hwType)},handleRowClick:function(e,t,a){this.radio=e.id,this.$emit("select",e)},handleSeacher:function(){this.form.start=1,this.getList()},handleChange:function(e){for(var t=0;t<this.tableData.length;t++){var a=this.tableData[t];if(e==a.id)return void this.$emit("select",a)}},toDetails:function(e){this.radio=e.id,e.id=e.auditId,this.$emit("select",e)},hanldeView:function(e){window.open("/rc/detail?rxId="+e.auditId)}}}},F5yx:function(e,t,a){var i=a("VU/8")(a("EJBL"),a("7hSk"),function(e){a("wG7C")},"data-v-7b97e05b",null);e.exports=i.exports},HE2s:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,s=a("bOdI"),l=a.n(s),o=a("sjUf");t.default={props:{gradeValue:{type:String,default:""},courseValue:{type:String,default:""},select:{type:String,default:""}},data:function(){return{emptyText:" ",radio:this.select||"",parmasList:{paperType:"",gradeId:"",courseId:"",courseValue:"",fullscore:"",paperName:"",start:1,size:30,total:0},paperTypeOptions:[{label:"期中考试",value:"1"},{label:"期末考试",value:"2"},{label:"单元测试",value:"3"}],pageloading:!1,tableData:[]}},created:function(){this.$parent.$emit("currentPage","/exam/col/exam"),this.init()},methods:(i={init:function(){this.getList()},handleChange:function(){this.form.start=1,this.getList()},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},handleSeache:function(){this.form.start=1,this.getList()},getList:function(){var e=this;this.pageloading=!0,this.tableData=[];var t={name:this.parmasList.paperName||void 0,testpaperType:this.parmasList.paperType||void 0,gradeValue:this.gradeValue,courseValue:this.courseValue,allScore:this.parmasList.fullscore||void 0,start:this.parmasList.start,size:this.parmasList.size};a.i(o.k)(t).then(function(t){e.emptyText="暂无数据",e.pageloading=!1,t.list&&t.list.forEach(function(e,t){e.radio=!1}),e.tableData=t.list,e.parmasList.total=t.total}).catch(function(t){e.emptyText="暂无数据",e.pageloading=!1})},handleCurrentChange:function(e){this.parmasList.start=e,this.getList()},handleChangeExamType:function(){this.parmasList.start=1,this.getList()},handleSeacher:function(){this.parmasList.start=1,this.getList()},handleRowClick:function(e,t,a){this.radio=e.id,this.$emit("select",e)}},l()(i,"handleChange",function(e){for(var t=0;t<this.tableData.length;t++){var a=this.tableData[t];if(e==a.id)return void this.$emit("select",a)}}),l()(i,"hanldeView",function(e){window.localStorage.removeItem("papers-"+e.id),window.localStorage.removeItem("oldpapers-"+e.id),window.localStorage.removeItem("recycleDatas-"+e.id),window.localStorage.removeItem("papersForm-"+e.id),window.localStorage.removeItem("papersChekedform-"+e.id),window.open("/exam/parperpreview?id="+e.id)}),i)}},HU6I:function(e,t,a){"use strict";t.a={currentColumn:[{prop:"rcType",label:"资源分类",align:"center",width:"160"},{prop:"knowledge",label:"知识点",align:"center",width:"100"},{prop:"fileAuthor",label:"作者",align:"center",width:"100"},{prop:"fileName",label:"资源名称（小于50字）",align:"center",width:""},{prop:"uploadValue",label:"上传文件",align:"center",width:"280"}],tableData2:[{id:"cell1",name:"标题"},{id:"cell2",name:"上传人"},{id:"cell3",name:"标签"},{id:"cell4",name:"简介"},{id:"cell5",name:"下载控制"}]}},JAX5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("sjUf");t.default={props:{type:{type:String,default:"1"},gradeValue:{type:String,default:""},courseValue:{type:String,default:""},select:{type:String,default:""}},data:function(){return{radio:this.select||"",currentValue:"100",emptyText:" ",multipleSelection:[],form:{name:"",type:"1",gradeId:"",courseId:"",shareId:"",startDate:"",endDate:"",timeLimt:"2",times:0,gradeValue:"",courseValue:"",id:"",start:1,size:30,keyWord:"",total:0,desc:""},pageloading:!1,Userloading:!1,pickerOptions0:{},pickerOptions1:{},options:{grade:[],corse:[]},repairtypeapplyOptions:[],repairtypeapplyOption:[],tableData:[{}],courseMap:{},typeList:[],allCourseList:[],gradeCourseData:{},hwType:"1"}},watch:{hwType:function(e){this.form.keyWord="",this.getList(this.hwType)},"form.startDate":function(e,t){this.pickerOptions1=e?{disabledDate:function(t){return t.getTime()<e.getTime()}}:{disabledDate:function(e){return!1}}},"form.endDate":function(e,t){this.pickerOptions0=e?{disabledDate:function(t){return t.getTime()>e.getTime()}}:{disabledDate:function(e){return!1}}}},created:function(){this.init()},methods:{init:function(){this.getList(this.hwType)},trim:function(e){return e.replace(/^\s+|\s+$/g,"")},getList:function(e){var t=this;1==e?(this.pageloading=!0,this.tableData=[],this.form.keyWord=this.trim(this.form.keyWord),a.i(i.i)({gradeValue:this.gradeValue,courseValue:this.courseValue,beginTime:this.form.startDate?this.$moment(this.form.startDate).format("YYYY-MM-DD"):void 0,endTime:this.form.endDate?this.$moment(this.form.endDate).format("YYYY-MM-DD")+" 23:59:59":void 0,keyWord:this.form.keyWord||void 0,start:this.form.start,size:this.form.size}).then(function(e){t.emptyText="暂无数据",t.pageloading=!1,t.tableData=e.list,t.form.total=e.total}).catch(function(e){t.emptyText="暂无数据",t.pageloading=!1})):(this.pageloading=!0,this.tableData=[],this.form.keyWord=this.trim(this.form.keyWord),a.i(i.j)({gradeValue:this.form.gradeValue,courseValue:this.form.courseValue,beginTime:this.form.startDate||void 0,endTime:this.form.endDate||void 0,keyWord:this.form.keyWord||void 0,start:this.form.start,size:this.form.size}).then(function(e){t.emptyText="暂无数据",t.pageloading=!1,t.tableData=e.list,t.form.total=e.total}).catch(function(e){t.emptyText="暂无数据",t.pageloading=!1}))},handleSelectionChange:function(e){this.multipleSelection=e},handleCurrentChange:function(e){this.form.start=e,this.getList(this.hwType)},handleRowClick:function(e,t,a){this.radio=e.id,this.$emit("select",e)},handleSeacher:function(){this.form.start=1,this.getList(this.hwType)},handleChange:function(e){for(var t=0;t<this.tableData.length;t++){var a=this.tableData[t];if(e==a.id)return void this.$emit("select",a)}}}}},PqJL:function(e,t,a){var i=a("VU/8")(a("JAX5"),a("izfb"),function(e){a("yQpa")},"data-v-f3dbbd8e",null);e.exports=i.exports},UvPD:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sy-upload-page"},[a("div",{staticClass:"sy-note-upload-form"},[a("table",{staticClass:"sy-upload-page-table",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[a("tr",[a("td",{attrs:{width:"12%"}},[e._v("第一步：资源目录")]),e._v(" "),a("td",[a("span",{staticClass:"sy-lf center"},[e._v("基础型课程")]),e._v(" "),a("div",{staticClass:"sy-upload-page-row1 left"},["{}"!=JSON.stringify(this.data)?a("el-tag",{attrs:{type:"primary"}},[e._v(e._s(e.catalog))]):a("div",{class:{"el-input__inner":!0,cp:!0,borderRed:e.isShowCatalogError},on:{click:e.choseCatalog}},[e._v("\n                            "+e._s(e.catalog)+"\n                        ")]),e._v(" "),e.isShowCatalogError?a("span",{staticClass:"errorMsg",staticStyle:{bottom:"-24px"}},[e._v(e._s(e.catalogErrorText))]):e._e()],1)])]),e._v(" "),a("tr",[a("td",[e._v("第二步：上传资源")]),e._v(" "),a("td",{attrs:{align:"left"}},[a("el-table",{staticClass:"step2 mb5",staticStyle:{width:"100%"},attrs:{data:e.tableData1,"empty-text":e.emptyText}},e._l(e.currentColumn,function(t){return a("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,width:t.width,align:t.align},scopedSlots:e._u([{key:"default",fn:function(i){return["rcType"===t.prop?a("div",[a("el-select",{class:{borderRed:i.row.isShowResourceTypeError},on:{change:function(t){e.resourceTypeChange(i.$index)}},model:{value:i.row.resourceType,callback:function(e){i.row.resourceType=e},expression:"scope.row.resourceType"}},e._l(e.rcTypess,function(e){return a("el-option",{key:e.value,attrs:{label:e.text,value:e.value}})})),e._v(" "),i.row.isShowResourceTypeError?a("span",{staticClass:"errorMsg"},[e._v(e._s(i.row.resourceTypeErrorText))]):e._e()],1):"knowledge"===t.prop?a("div",{staticClass:"el-input__inner cp",on:{click:function(t){e.choseNnowledge(i.$index)}}},[e._v("\n                                    "+e._s(i.row.knowledge)+"\n                                ")]):"fileAuthor"===t.prop?a("el-input",{attrs:{size:"small",placeholder:"最长10个字",maxlength:10},model:{value:i.row.fileAuthor,callback:function(e){i.row.fileAuthor="string"==typeof e?e.trim():e},expression:"scope.row.fileAuthor"}}):"fileName"===t.prop?a("div",[a("el-input",{class:{borderRed:i.row.isShowRcFileNameError},attrs:{size:"small",placeholder:"最长50个字",maxlength:50},on:{blur:function(t){e.rcFileNameKeyupEnter(i.$index)}},model:{value:i.row.fileName,callback:function(e){i.row.fileName="string"==typeof e?e.trim():e},expression:"scope.row.fileName"}}),e._v(" "),i.row.isShowRcFileNameError?a("span",{staticClass:"errorMsg"},[e._v("资源名称不能"+e._s(i.row.rcFileNameErrorText))]):e._e()],1):"uploadValue"===t.prop?a("div",[a("el-upload",{ref:"upload_"+i.$index,refInFor:!0,staticClass:"sy-lf sy-import",attrs:{"on-change":e.onChange,"on-progress":e.onProgress,data:e.uploadData,action:e.uploadAction,"before-upload":e.beforeUpload,"on-success":e.onSuccess,"auto-upload":!1,"show-file-list":!1,name:"fileUpload",disabled:(i.$index,!1)}},[a("div",{staticClass:"sy-import-file-name el-input__inner",class:{borderRed:i.row.isShowfileNameError},on:{click:function(t){e.handleuPLOAD(i.$index)}},slot:"trigger"},[a("div",{staticClass:"sy-import-file-name-div"},[e._v(e._s(i.row.uploadValue))]),e._v(" "),a("span",{staticClass:"fa fa-folder-o"})])]),e._v(" "),a("span",{staticClass:"sy-note-progress"},[i.row.isUploadBtn?a("el-button",{attrs:{type:"primary",disabled:""==i.row.uploadValue,size:"small"},on:{click:function(t){e.submitUpload("upload_"+i.$index)}}},[e._v("\n                                            上传\n                                        ")]):e._e(),e._v(" "),i.row.isProgress?a("span",[i.row.isShowProgress?e._e():a("span",{attrs:{title:"正在上传..."}},[e._v(e._s(i.row.percentage))]),e._v(" "),i.row.isShowProgress?a("i",{staticClass:"fontLv el-icon-circle-check",attrs:{title:"上传成功"}}):e._e()]):e._e(),e._v(" "),i.row.isErrorProgress?a("i",{staticClass:"sy-error-progress fa fa-info-circle ",attrs:{title:"上传出错"}}):e._e()],1),e._v(" "),i.row.isShowfileNameError?a("span",{staticClass:"errorMsg"},[e._v(e._s(i.row.fileNameErrorText))]):e._e(),e._v(" "),a("el-button",{staticClass:"sy-import-button",attrs:{type:"danger",size:"small",disabled:i.row.deleteColumnDisabled},on:{click:function(t){e.deleteColumn(i.$index)}}},[e._v("\n                                        删除\n                                    ")])],1):e._e()]}}])})})),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",disabled:e.addColumnDisabled},on:{click:e.addColumn}},[e._v("\n                        "+e._s(e.uploadText)+"\n                    ")])],1)]),e._v(" "),a("tr",[a("td",[e._v("第三步：资源属性")]),e._v(" "),a("td",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData2}},[a("el-table-column",{attrs:{prop:"name",label:"属性分类",width:"150",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"n",label:"内容",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["cell1"===t.row.id?a("div",[a("el-input",{class:{borderRed:e.isShowRcNameError},attrs:{size:"small",placeholder:"最长50个字",maxlength:50},on:{blur:e.rcNameKeyupEnter,keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.rcNameKeyupEnter(t)}},model:{value:e.rcName,callback:function(t){e.rcName="string"==typeof t?t.trim():t},expression:"rcName"}}),e._v(" "),e.isShowRcNameError?a("span",{staticClass:"errorMsg"},[e._v("标题不能为空!")]):e._e()],1):"cell2"===t.row.id?a("div",{staticClass:"left"},[a("div",{class:{"el-input__inner":!0,cp:!0,borderRed:e.isShowAuthorNameError},staticStyle:{width:"30%"},on:{click:e.choseUploadUser}},[e._v("\n                                        "+e._s(e.authorName)+"\n                                    ")]),e._v(" "),e.isShowAuthorNameError?a("span",{staticClass:"errorMsg"},[e._v("上传人不能为空!")]):e._e()]):"cell3"===t.row.id?a("div",{staticClass:"left"},[a("div",{staticClass:"el-input el-input__inner cp",staticStyle:{width:"30%"},on:{click:e.choseLabel}},[e._v(e._s(e.labelName))]),e._v(" "),a("el-input",{staticStyle:{width:"30%"},attrs:{size:"small",placeholder:"自定义标签（只能有一个,最大长度50）",maxlength:50},model:{value:e.tag,callback:function(t){e.tag="string"==typeof t?t.trim():t},expression:"tag"}})],1):"cell4"===t.row.id?a("el-input",{staticStyle:{margin:"5px 0"},attrs:{type:"textarea",rows:7,resize:"none",placeholder:"最大输入长度为500",maxlength:500},model:{value:e.jianjie,callback:function(t){e.jianjie=t},expression:"jianjie"}}):"cell5"===t.row.id?a("div",{staticClass:"left"},[a("el-radio",{staticClass:"radio",attrs:{label:"0"},model:{value:e.downloadControl,callback:function(t){e.downloadControl=t},expression:"downloadControl"}},[e._v("允许下载")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"1"},model:{value:e.downloadControl,callback:function(t){e.downloadControl=t},expression:"downloadControl"}},[e._v("不允许下载")])],1):e._e()]}}])})],1)],1)]),e._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[a("div",{staticClass:"pl15 center sy-rc-btn-goTop"},[a("el-button",{staticClass:"sy-import-button",attrs:{type:"primary",size:"small",disabled:e.isSubmitAndUpload},on:{click:e.submitAndUpload}},[e._v("\n                            提交\n                        ")])],1)])])])]),e._v(" "),a("sy-dialog",{attrs:{"append-to-body":"",title:"选择学科","close-on-click-modal":!1,position:"middle",width:"600px",height:"380px",slide:"fade",visible:e.coursesDialog},on:{"update:visible":function(t){e.coursesDialog=t}}},[a("div",{staticClass:"sy-upload-page-chose-courses",slot:"body"},[e.cValue?e._e():a("div",{staticClass:"sy-upload-page-courses-list sy-theme-border"},[a("div",{staticClass:"sy-upload-page-courses-list-title sy-theme-background"},[e._v("学科")]),e._v(" "),a("div",{staticClass:"sy-upload-page-courses-list-cont"},[e.courses&&e.courses.length>0?a("ul",e._l(e.courses,function(t,i){return a("li",{key:t.value,staticClass:"sy-theme-border",on:{click:function(a){e.courseName(t.value,i)}}},[a("a",{class:{"sy-theme-text-active":e.curIndex==i},attrs:{href:"javascript:void(0)"}},[e._v(e._s(t.name))])])})):a("span",{staticClass:"tc"},[e._v(e._s(e.emptyText))])])]),e._v(" "),a("div",{staticClass:"sy-upload-page-tree",style:{"margin-left":e.cValue?"0":"190px"}},[e.catalogTreeData&&e.catalogTreeData.length>0?a("sy-ztree",{attrs:{idName:"coursesTree",treeData:e.catalogTreeData,titleChecked:"",defaultChecked:e.defaultChecked,showRadioBox:"",isExpendAll:"",radioType:"all"},on:{"checked-node":e.checkedCourses}}):a("span",[e._v(e._s(e.emptyTextCatalogTree))])],1)]),e._v(" "),a("div",{slot:"footer"},[a("el-button",{attrs:{type:"",size:"small"},on:{click:function(t){e.coursesDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addNewBtn},on:{click:e.submitCourses}},[e._v("确 定")])],1)]),e._v(" "),a("sy-dialog",{attrs:{"append-to-body":"",title:"选择知识点","close-on-click-modal":!1,position:"middle",width:"600px",height:"380px",slide:"fade",visible:e.choseNnowledgelDialog},on:{"update:visible":function(t){e.choseNnowledgelDialog=t}}},[a("div",{staticStyle:{padding:"0 10px"},slot:"body"},[a("div",{staticClass:"sy-row"},[a("div",{staticClass:"sy-col sy-20"},[e.nowledgelTreeData&&e.nowledgelTreeData.length>0?a("sy-ztree",{attrs:{idName:"nowledgelTree",treeData:e.nowledgelTreeData,defaultChecked:e.nowledgelChecked,showRadioBox:"",isExpendAll:"",titleChecked:"",radioType:"all"},on:{"checked-node":e.checkedNode}}):a("span",[e._v(e._s(e.emptyText))])],1)])]),e._v(" "),a("div",{slot:"footer"},[a("el-button",{attrs:{type:"",size:"small"},on:{click:function(t){e.choseNnowledgelDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addNewBtn},on:{click:e.submitNnowledge}},[e._v("确 定")])],1)]),e._v(" "),a("sy-dialog",{attrs:{"append-to-body":"",title:"提示","close-on-click-modal":!1,position:"middle",width:"300px",height:"200px",slide:"fade",visible:e.deleteColumnDialog},on:{"update:visible":function(t){e.deleteColumnDialog=t}}},[a("div",{staticStyle:{padding:"10px"},slot:"body"},[a("div",{staticClass:"el-message-box__content"},[a("span",{staticClass:"el-message-box__status el-icon-warning"}),e._v(" "),a("div",{staticClass:"el-message-box__message",staticStyle:{"margin-left":"50px"}},[a("p",[e._v("确认删除该资源吗？")])])])]),e._v(" "),a("div",{slot:"footer"},[a("el-button",{attrs:{type:"",size:"small"},on:{click:function(t){e.deleteColumnDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addNewBtn},on:{click:e.submitDeleteColumn}},[e._v("确 定")])],1)]),e._v(" "),a("sy-dialog",{attrs:{"append-to-body":"",title:"选择已有标签","close-on-click-modal":!1,position:"middle",width:"600px",height:"380px",slide:"fade",visible:e.choseLabelDialog},on:{"update:visible":function(t){e.choseLabelDialog=t}}},[a("div",{staticStyle:{padding:"10px"},slot:"body"},[a("div",{staticClass:"sy-row"},[a("div",{staticClass:"sy-col sy-20"},[e.labels&&e.labels.length>0?a("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.labels,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])})):a("span",[e._v(e._s(e.emptyText))])],1)])]),e._v(" "),a("div",{slot:"footer"},[a("el-button",{attrs:{type:"",size:"small"},on:{click:function(t){e.choseLabelDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addNewBtn},on:{click:e.submitLabel}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]}},XRJc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("ukDs"),s=(a.n(i),a("6G3N"));t.default={name:"Upload",mixins:[s.a]}},YE7g:function(e,t,a){"use strict";a.d(t,"c",function(){return s}),a.d(t,"d",function(){return l}),a.d(t,"e",function(){return o}),a.d(t,"b",function(){return r}),a.d(t,"f",function(){return n}),a.d(t,"a",function(){return c}),a.d(t,"g",function(){return d}),a.d(t,"h",function(){return u});var i=a("r6Pd"),s=function(e){return a.i(i.a)("GET","/api/base/rc/course",e)},l=function(e){return a.i(i.a)("GET","/api/base/rc/teacher/teacher_grade_course",e)},o=function(e){return a.i(i.a)("GET","/api/base/lib/catalog/list",e)},r=function(e){return a.i(i.a)("GET","/api/rc/resource_type/"+e)},n=function(e){return a.i(i.a)("GET","/api/base/knowpoint/find/tree",e)},c=function(e){return a.i(i.a)("GET","/api/rc/routineManage",e)},d=function(e){return a.i(i.a)("GET","/api/rc/label",e)},u=function(e){return a.i(i.a)("PUT","/api/rc/resource/upload/basic",e)}},gu9z:function(e,t,a){var i=a("VU/8")(a("HE2s"),a("vEkh"),null,null,null);e.exports=i.exports},hi5G:function(e,t){},izfb:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sy-app-container"},[a("sy-grad-4",{attrs:{border:!1}},[a("div",{staticClass:"not_weight",staticStyle:{"padding-top":"5px"},slot:"headerRight"},[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{editable:!1,type:"date",placeholder:"请选择开始日期","picker-options":e.pickerOptions0},model:{value:e.form.startDate,callback:function(t){e.form.startDate=t},expression:"form.startDate"}}),e._v(" "),a("span",{staticStyle:{padding:"0 10px"}},[e._v("~")]),e._v(" "),a("el-date-picker",{staticStyle:{width:"140px","margin-right":"10px"},attrs:{editable:!1,type:"date",placeholder:"请选择结束日期","picker-options":e.pickerOptions1},model:{value:e.form.endDate,callback:function(t){e.form.endDate=t},expression:"form.endDate"}}),e._v(" "),a("el-input",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"输入作业关键字",maxlength:50},model:{value:e.form.keyWord,callback:function(t){e.form.keyWord=t},expression:"form.keyWord"}}),e._v(" "),a("el-button",{attrs:{icon:"search"},on:{click:e.handleSeacher}},[e._v("查询")]),e._v(" "),a("el-radio-group",{staticStyle:{float:"right"},attrs:{size:"small"},model:{value:e.hwType,callback:function(t){e.hwType=t},expression:"hwType"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("我发布的作业")]),e._v(" "),a("el-radio-button",{attrs:{label:"2"}},[e._v("校级作业")])],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageloading,expression:"pageloading"}],staticStyle:{padding:"0 10px",overflow:"auto"},attrs:{"element-loading-text":"拼命加载中..."},slot:"bodyRight"},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:"1"==e.hwType,expression:"hwType == '1'"}],ref:"multipleTable",staticStyle:{width:"100%",height:"100%"},attrs:{"empty-text":e.emptyText,data:e.tableData,border:"","tooltip-effect":"dark",height:"100%"},on:{"row-click":e.handleRowClick}},[a("el-table-column",{attrs:{align:"center",width:"40"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{staticClass:"radio",attrs:{label:t.row.id},on:{change:e.handleChange},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"left","header-align":"center",prop:"name",label:"练习作业名称"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"gradeName",label:"年级",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"classname",label:"班级",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"courseName",label:"学科",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"useTime",label:"布置时间",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("moment")(t.row.useTime,"YYYY-MM-DD HH:mm:ss")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"completedCount",label:"完成数",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"limitTime",label:"完成所需时长",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("-1"==t.row.limitTime?"/":t.row.limitTime+"分钟"))])]}}])})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"2"==e.hwType,expression:"hwType == '2'"}],staticStyle:{width:"100%",height:"100%"},attrs:{"empty-text":e.emptyText,data:e.tableData,border:"","tooltip-effect":"dark",height:"100%"},on:{"row-click":e.handleRowClick}},[a("el-table-column",{attrs:{align:"center",width:"40"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{staticClass:"radio",attrs:{label:t.row.id},on:{change:e.handleChange},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"name",label:"练习作业名称"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"gradeName",label:"年级",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"courseName",label:"学科",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"userName",label:"布置人",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"useTime",label:"创建时间",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("moment")(t.row.useTime,"YYYY-MM-DD HH:mm:ss")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"limitTime",label:"完成所需时长",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s("-1"==t.row.limitTime?"/":t.row.limitTime+"分钟"))])]}}])})],1)],1),e._v(" "),a("div",{slot:"footer"},[a("el-pagination",{staticClass:"pagination-mf",attrs:{"current-page":e.form.start,"page-size":e.form.size,layout:"total, prev, pager, next",total:e.form.total},on:{"current-change":e.handleCurrentChange}})],1)])],1)},staticRenderFns:[]}},psr1:function(e,t,a){var i=a("VU/8")(a("x+LB"),a("0ALC"),function(e){a("hi5G")},"data-v-f47fa5d4",null);e.exports=i.exports},ukDs:function(e,t){},vEkh:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sy-app-container"},[a("sy-grad-4",{attrs:{border:!1}},[a("div",{staticClass:"not_weight",staticStyle:{padding:"5px 0 0 0"},slot:"headerRight"},[a("el-select",{staticClass:"sy-exam-select-120",attrs:{placeholder:"请选择考试类型"},on:{change:e.handleChangeExamType},model:{value:e.parmasList.paperType,callback:function(t){e.parmasList.paperType=t},expression:"parmasList.paperType"}},[a("el-option",{attrs:{label:"全部考试类型",value:""}}),e._v(" "),e._l(e.paperTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),a("el-input",{staticStyle:{width:"120px"},attrs:{maxlength:6,placeholder:"请输入总分"},model:{value:e.parmasList.fullscore,callback:function(t){e.parmasList.fullscore=t},expression:"parmasList.fullscore"}}),e._v(" "),a("el-input",{staticStyle:{width:"150px"},attrs:{maxlength:50,placeholder:"请输入试卷名称"},model:{value:e.parmasList.paperName,callback:function(t){e.parmasList.paperName=t},expression:"parmasList.paperName"}}),e._v(" "),a("el-button",{attrs:{icon:"search"},on:{click:e.handleSeacher}},[e._v("搜索")])],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageloading,expression:"pageloading"}],staticStyle:{padding:"0 10px"},attrs:{"element-loading-text":"拼命加载中..."},slot:"bodyRight"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%",height:"100%"},attrs:{stripe:!1,"empty-text":e.emptyText,data:e.tableData,border:"","tooltip-effect":"dark",height:"100%"},on:{"row-click":e.handleRowClick}},[a("el-table-column",{attrs:{align:"center",width:"45"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{staticClass:"radio",attrs:{label:t.row.id},on:{change:e.handleChange},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v(e._s(""))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"left","header-align":"center",prop:"name",label:"试卷名称"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"allScore",width:"70",label:"试卷总分"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"topicCount",width:"60",label:"试题数"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",width:"70",prop:"shareType",label:"共享模式"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(0==t.row.shareType?"个人":1==t.row.shareType?"校级":"年级"))]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"testpaperType",width:"70",label:"试卷分类"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1==t.row.testpaperType?"期中考试":2==t.row.testpaperType?"期末考试":"单元测试"))]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"gradeName",label:"年级",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"courseName ",width:"100",label:"课程"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.courseName))]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",align:"center",prop:"userName",width:"100",label:"创建人"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"140",prop:"createTime",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"line-height":"16px"}},[e._v(e._s(e._f("moment")(t.row.createTime,"YYYY-MM-DD HH:mm:ss")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.hanldeView(t.row)}}},[e._v("预览")])]}}])})],1)],1),e._v(" "),a("div",{slot:"footer"},[a("el-pagination",{staticClass:"pagination-mf",attrs:{"current-page":e.parmasList.start,"page-size":e.parmasList.size,layout:"total, prev, pager, next",total:e.parmasList.total},on:{"current-change":e.handleCurrentChange}})],1)])],1)},staticRenderFns:[]}},wG7C:function(e,t){},"x+LB":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("bOdI"),s=a.n(i),l=a("sjUf"),o=a("gu9z"),r=a.n(o),n=a("PqJL"),c=a.n(n),d=a("F5yx"),u=a.n(d),h=a("5Swp"),p=a.n(h);t.default={components:{examList:r.a,hwList:c.a,rcList:u.a,upload:p.a},data:function(){return{input:"",gradeValue:"",gradeId:"",courseValue:"",oldCourse:"",isExpendAll:!0,action:"",examSelectDialog:!1,hwSelectDialog:!1,gradeOptions:[],classOptions:[],defaultProps:{children:"children",label:"name"},treeData:[],courseVMs:[],courseMap:{},rcDialog:!1,rcSelectDialog:!1,rcUploadDialog:!1,currentTerm:"",examDefaultSelect:"",currentSelectObj:{},data:[],currentData:{},catalogObj:{},uploadData:{}}},created:function(){this.$parent.$emit("currentPage","/sl/home/setting"),this.init()},methods:{init:function(){this.getGradeCourseList()},handleOpenSelect:function(e,t){this.currentSelectObj=t,"dycs"==e.type?(this.examSelectDialog=!0,this.examDefaultSelect=t.id):"khlx"==e.type?this.hwSelectDialog=!0:(this.uploadData={id:t.catelogId,name:t.catelogName,courseValue:t.courseValue,schooltermType:t.schooltermType,stageId:t.stageId,gradeValue:t.gradeValue},this.rcDialog=!0)},handleExamCtr:function(e){this.examSelectDialog=!1,this.hwSelectDialog=!1,this.rcSelectDialog=!1,"ok"!=e&&(this.currentSelectObj.data={},this.currentSelectObj.name="",this.currentSelectObj.rcName="",this.currentSelectObj.objectId="")},getSelectExam:function(e){this.rcDialog=!1,this.rcUploadDialog=!1,this.currentSelectObj.data=e,this.currentSelectObj.name=e.name,this.currentSelectObj.rcName=e.name,this.currentSelectObj.objectId=e.id},getSelectWkExam:function(e){this.rcDialog=!1,this.rcUploadDialog=!1,this.currentSelectObj.data=e,this.currentSelectObj.name=e.name,this.currentSelectObj.rcName=e.name,this.currentSelectObj.objectId=e.id},openDialog:function(e){"rc"==e&&(this.rcSelectDialog=!0)},handleClick:function(e,t,i,s){var o=this;if("add"==e)s.push({id:"",name:"",rcName:"",objectId:"",catelogName:i.catelogName,schooltermType:i.schooltermType,courseValue:i.courseValue,gradeValue:i.gradeValue,catelogId:i.catelogId,stageId:i.stageId,typeId:i.typeId,data:{},isSave:!1});else if("delete"==e)i.id?this.$confirm("是否继续删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.i(l.c)(i.id).then(function(e){o.$notify({message:"删除成功",type:"success"}),o.getDetails()})}).catch(function(){}):s&&s.length>1?s.splice(t,1):(i.id="",i.objectId="",i.name="",i.rcName="",i.catelogName="",i.schooltermType="",i.stageId="",i.courseValue="",i.gradeValue="",i.catelogId="",i.typeId="",i.data={},i.isSave=!1);else if("save"==e){var r={catelogId:i.catelogId,courseValue:i.courseValue,gradeValue:i.gradeValue,name:i.name,objectId:i.objectId,objectName:i.rcName,typeId:i.typeId};i.id?(r.id=i.id,a.i(l.d)(r).then(function(e){o.$notify({message:"修改成功",type:"success"}),i.isSave=!0}).catch(function(e){})):a.i(l.e)([r]).then(function(e){o.$notify({message:"保存成功",type:"success"}),i.isSave=!0}).catch(function(e){})}},getGradeCourseList:function(){var e=this;a.i(l.f)().then(function(t){e.gradeOptions=t.gradeSimpleVMs||[],e.courseMap=t.courseMap||{},e.courseVMs=t.courseVMs||[],e.gradeId=e.gradeOptions.length>0?e.gradeOptions[0].id:"",e.courseValue=e.courseMap[e.gradeId]&&e.courseMap[e.gradeId].length>0?e.courseMap[e.gradeId][0].courseValue:"",e.oldCourse=""})},handleGradeChange:function(e){this.data=[];var t=this.courseMap[this.gradeId]&&this.courseMap[this.gradeId].length>0?this.courseMap[this.gradeId][0].courseValue:"";this.oldCourse&&t==this.oldCourse?(this.treeData=[],this.getBMlist()):(this.oldCourse=t,this.courseValue=t)},handleCourseChange:function(e){this.data=[],this.treeData=[],this.getBMlist()},getBMlist:function(){var e=this;if(this.courseValue){var t="";this.gradeOptions.forEach(function(a,i){a.id==e.gradeId&&(t=a.gradeValue)}),this.gradeValue=t;var i={courseValue:this.courseValue,gradeValue:t};a.i(l.g)(i).then(function(t){e.treeData=t?e.data2tree(t):[]})}},handleNodeClick:function(e,t){this.currentData=e,this.getDetails()},getDetails:function(){var e=this;a.i(l.h)({courseValue:this.currentData.courseValue,gradeValue:this.currentData.gradeValue,catelogId:this.currentData.id}).then(function(t){var a=e.makeData(e.currentData);t&&t.length>0&&a.forEach(function(a,i){t.forEach(function(t,i){a.typeId==t.type&&(a.data[0].id?a.data.push({id:t.resId,courseValue:e.currentData.courseValue||"",gradeValue:e.currentData.gradeValue||"",catelogId:e.currentData.id||"",catelogName:e.currentData.name||"",schooltermType:e.currentData.schooltermType||"",stageId:e.currentData.stageId||"",name:t.resName,objectId:t.objId,rcName:t.objName,typeId:a.typeId,data:{},isSave:!0}):(a.data[0].id=t.resId,a.data[0].name=t.resName,a.data[0].objectId=t.objId,a.data[0].rcName=t.objName,a.data[0].typeId=a.typeId,a.data[0].isSave=!0))})}),e.data=a})},makeData:function(e){var t=[];return e.parentId?(t.push({type:"lbkc",name:"录播课程",typeId:"1",data:[{id:"",courseValue:e.courseValue||"",gradeValue:e.gradeValue||"",catelogId:e.id||"",catelogName:e.name||"",schooltermType:e.schooltermType||"",stageId:e.stageId||"",name:"",objectId:"",rcName:"",typeId:"1",data:{},isSave:!1}]}),t.push({type:"khlx",name:"课后练习",typeId:"2",data:[{id:"",name:"",rcName:"",courseValue:e.courseValue||"",gradeValue:e.gradeValue||"",catelogId:e.id||"",catelogName:e.name||"",schooltermType:e.schooltermType||"",stageId:e.stageId||"",data:{},objectId:"",typeId:"2",isSave:!1}]}),t.push({type:"ptwk",name:"配套微课",typeId:"4",data:[{id:"",name:"",rcName:"",courseValue:e.courseValue||"",gradeValue:e.gradeValue||"",catelogId:e.id||"",catelogName:e.name||"",schooltermType:e.schooltermType||"",stageId:e.stageId||"",data:{},objectId:"",typeId:"4",isSave:!1}]})):t.push({type:"dycs",name:"单元测试",typeId:"3",data:[{id:"",name:"",rcName:"",courseValue:e.courseValue||"",gradeValue:e.gradeValue||"",catelogId:e.id||"",catelogName:e.name||"",schooltermType:e.schooltermType||"",stageId:e.stageId||"",data:{},objectId:"",typeId:"3",isSave:!1}]}),t},data2tree:function(e,t,a){t||(t="id"),a||(a="parentId");for(var i=[],l=0;l<e.length;l++){var o=_.cloneDeep(e[l]);(o[a+""]||""==o[a+""])&&_.result(_.find(e,s()({},t,o[a+""])),t)||(function i(s){for(var l=[],o=0;o<e.length;o++){var r=_.cloneDeep(e[o]);r[a+""]==s[t+""]&&(l.push(r),i(r))}l.length&&(s.children=l)}(o),i.push(o))}return i}},mounted:function(){}}},yQpa:function(e,t){}});