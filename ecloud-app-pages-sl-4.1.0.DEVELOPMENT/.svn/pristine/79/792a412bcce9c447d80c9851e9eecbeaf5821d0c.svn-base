webpackJsonp([2,26,27,28,29],{"+hVb":function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tpl-sl-details-body"},[a("div",{staticClass:"tpl-sl-details-body-left",style:{"margin-right":e.expened?"230px":"0px"}},[2==e.rcType?a("hw",{attrs:{"res-id":e.objId},on:{complated:e.handleComplated}}):e._e(),e._v(" "),3==e.rcType?a("exam",{attrs:{"res-id":e.examId,"exam-id":e.examId},on:{complated:e.handleComplated}}):e._e(),e._v(" "),e.rcType?e._e():a("div",{directives:[{name:"show",rawName:"v-show",value:!e.resId,expression:"!resId"}],staticClass:"center",staticStyle:{"line-height":"480px"}},[e._v(" \n            请选择资源\n        ")])],1),e._v(" "),a("div",{staticClass:"tpl-sl-details-body-right",style:{width:e.expened?"230px":"0px",padding:e.expened?"5px":"0px"}},[a("div",{staticClass:"tpl-sl-details-body-right-btn sy-theme-background",style:{visibility:e.expened?"hidden":"visible"},on:{click:function(t){e.expened=!e.expened}}},[a("i",{staticClass:"fa",class:["fa-angle-double-"+(e.expened?"right":"left")],attrs:{"aria-hidden":"true"}})]),e._v(" "),a("el-tree",{staticStyle:{border:"0",height:"100%"},attrs:{data:e.catalogTreeData,"node-key":"id",props:e.defaultProps,"default-expanded-keys":[e.defaultKey],"current-node-key":e.defaultKey,"render-content":e.renderContent,"highlight-current":"","default-expand-all":!1},on:{"node-click":e.handleNodeClick}})],1)])},staticRenderFns:[]}},"2GYw":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,i=a("bOdI"),r=a.n(i),n=a("uu6+"),l=a.n(n),o=a("ZVag"),d=a.n(o),c=a("fv5m");t.default={components:{hw:l.a,exam:d.a},data:function(){return{expened:!0,rcType:null,activeName:"1",objId:"",defaultKey:"",examId:"",catalogTreeData:[],question:"",backForm:{anwser:""},defaultProps:{children:"resourceInfoVM",label:"name"},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择活动区域",trigger:"change"}],date1:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],date2:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],type:[{type:"array",required:!0,message:"请至少选择一个活动性质",trigger:"change"}],resource:[{required:!0,message:"请选择活动资源",trigger:"change"}],desc:[{required:!0,message:"请填写活动形式",trigger:"blur"}]},data:{},name:"",currentData:{}}},created:function(){this.init()},methods:(s={init:function(){var e=JSON.parse(window.sessionStorage.getItem("_course_data"));this.data=e||{},this.name=e.courseName,this.getCatalogTree()},handleNodeClick:function(e){},handleComplated:function(e){var t=this;a.i(c.d)().then(function(s){var i="",r="";s.allYearAndTermVMs&&s.allYearAndTermVMs.forEach(function(e,t){1==e.current&&(i=e.year)}),s.unitSchoolTermRHVM&&(r=s.unitSchoolTermRHVM.schoolTerm);var n={yearId:i,termId:r,courseValue:t.data.courseValue,resId:t.currentData.resId,resName:t.currentData.resName,catalogId:t.currentData.parentId,typeId:e.typeId};a.i(c.g)(n).then(function(e){})}).catch(function(e){})}},r()(s,"handleNodeClick",function(e){this.currentData=e,this.rcType=null,this.questionList=[],this.resId="",this.start=1,"rc"==e.sltype&&(this.resId=e.resId||"",this.rcType=e.type,this.objId=e.objId||"",this.examId=e.examId||"")}),r()(s,"renderContent",function(e,t){var a=t.node,s=t.data;return t.store,e("span",{style:"padding: 5px 0;"},[e("span",null,[e("i",{style:{display:1!=a.level?"none":"",fontSize:"16px",position:"relative",top:"2px"},class:{fa:!0,"fa-folder-o":!a.expanded,"fa-folder-open-o":a.expanded},attrs:{"aria-hidden":"true"}},[]),e("span",{style:{display:"rc"!=s.sltype?"none":"inline-block",width:"36px",height:"36px",verticalAlign:"middle"}},[e("img",{style:"width: 100%;height: 100%;border-radius: 3px;",attrs:{src:c.j+s.userId}},[])]),e("span",null,[" ",s.name])])])}),r()(s,"getCatalogTree",function(){var e=this;a.i(c.l)({courseValue:this.data.courseValue,gradeValue:this.data.gradeValue}).then(function(t){t&&t.forEach(function(e,a){e.resourceInfoVM&&e.resourceInfoVM.forEach(function(t,a){t.name=t.resName,t.sltype="rc",t.id=t.resId,t.parentId=e.id,t.parentName=e.name}),e.parentId||e.resourceInfoVM&&e.resourceInfoVM.forEach(function(a,s){a.name=a.resName,a.sltype="rc",a.parentId=e.id,a.parentName=e.name,t.push(a)})}),e.defaultKey=e.data.resId,e.catalogTreeData=e.data2tree(t)}).catch(function(e){})}),r()(s,"data2tree",function(e,t,a){t||(t="id"),a||(a="parentId");for(var s=[],i=0;i<e.length;i++){var n=_.cloneDeep(e[i]);(n[a+""]||""==n[a+""])&&_.result(_.find(e,r()({},t,n[a+""])),t)||(function s(i){for(var r=[],n=0;n<e.length;n++){var l=_.cloneDeep(e[n]);l[a+""]==i[t+""]&&(r.push(l),s(l))}r.length&&(i.resourceInfoVM=r)}(n),s.push(n))}return s}),s)}},"8rda":function(e,t,a){var s=a("VU/8")(a("P8O2"),a("cy0F"),function(e){a("P3Sl")},null,null);e.exports=s.exports},AY49:function(e,t){},FRCh:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tpl-sl-details-body"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showvideo,expression:"!showvideo"}]},[a("el-table",{staticStyle:{width:"100%",margin:"0 auto"},attrs:{data:e.tableData,border:"",stripe:""},on:{"row-click":e.handleRowClick}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"resName",label:"该知识点微课",align:"left","header-align":"center"}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showvideo,expression:"showvideo"}],staticClass:"tpl-sl-details-body"},[a("div",{staticClass:"tpl-sl-details-body-left"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.resId,expression:"!resId"}],staticClass:"center",staticStyle:{"line-height":"480px"}},[e._v(" \n                请选择资源\n            ")]),e._v(" "),a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:e.resId,expression:"resId"}],attrs:{type:"border-card"},model:{value:e.activeFlies,callback:function(t){e.activeFlies=t},expression:"activeFlies"}},e._l(e.files,function(t){return a("el-tab-pane",{key:t.fileId,attrs:{name:t.fileId,label:t.fileName}},[a("div",{staticClass:"tpl-sl-video-box"},[a("video",{ref:t.fileId,refInFor:!0,attrs:{src:e.makeUrl(t.path),autoplay:"",controls:"",height:"100%",width:"100%",loop:""}})])])})),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.resId,expression:"resId"}],staticStyle:{padding:"10px"}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"我要提问",name:"1"}},[a("el-input",{attrs:{type:"textarea",autofocus:"",rows:5,resize:"none",maxlength:1e3,autosize:{minRows:4,maxRows:8},placeholder:"请输入1000字以内的问题"},model:{value:e.question,callback:function(t){e.question="string"==typeof t?t.trim():t},expression:"question"}}),e._v(" "),a("div",{staticClass:"right",staticStyle:{padding:"10px 0"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("提交")])],1)],1)],1),e._v(" "),a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"学生答疑",name:"1"}},[e._l(e.questionList,function(t){return a("div",{key:t.id,staticClass:"tpl-sl-notice-item"},[a("el-form",{ref:"ruleForm",refInFor:!0,staticClass:"demo-ruleForm",attrs:{model:e.backForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"学生提问："}},[a("pre",{staticStyle:{margin:"0"}},[e._v(e._s(t.content))])]),e._v(" "),t.slQuestionsDetailsVMList&&t.slQuestionsDetailsVMList.length>0?a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"教师回复："}},e._l(t.slQuestionsDetailsVMList,function(t){return a("pre",{key:t.id,staticStyle:{margin:"0"}},[e._v(e._s(t.content))])})):e._e(),e._v(" "),2!=e.$store.state.userType&&t.slQuestionsDetailsVMList&&0==t.slQuestionsDetailsVMList.length?a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"教师回复："}},[e._v("暂无回复")]):e._e(),e._v(" "),2==e.$store.state.userType&&t.slQuestionsDetailsVMList&&0==t.slQuestionsDetailsVMList.length?a("el-form-item",{attrs:{label:"教师回复："}},[a("el-input",{attrs:{type:"textarea",autofocus:"",rows:4,resize:"none",maxlength:1e3,autosize:{minRows:4,maxRows:8},placeholder:"请输入1000字以内的内容"},model:{value:e.backForm.anwser,callback:function(t){e.backForm.anwser="string"==typeof t?t.trim():t},expression:"backForm.anwser"}})],1):e._e()],1),e._v(" "),2==e.$store.state.userType&&t.slQuestionsDetailsVMList&&0==t.slQuestionsDetailsVMList.length?a("div",{staticClass:"right",staticStyle:{"padding-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",loading:e.addMoreLoading}},[e._v("回复")])],1):e._e()],1)}),e._v(" "),e.isempty?e._e():a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.handleMore}},[e._v("加载更多")])],2)],1)],1)],1),e._v(" "),a("div",{staticClass:"tpl-sl-details-body-right"},e._l(e.tableData,function(t){return a("div",{key:t.id,staticClass:"tpl-sl-zsdwk-row cp",on:{click:function(a){e.handleChangeWK(t)}}},[a("i",{staticClass:"fa fa-film",attrs:{"aria-hidden":"true"}}),e._v(" "),a("span",{style:{color:t.selected?" #13CE66":"#666"}},[e._v(e._s(t.resName))]),e._v(" "),0==t.flag?a("i",{staticClass:"fa fa-check-circle",staticStyle:{color:"#13CE66"},attrs:{"aria-hidden":"true"}}):e._e()])}))])])},staticRenderFns:[]}},Kipu:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tpl-sl-details-body"},[a("div",{staticClass:"tpl-sl-details-body-left"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.resId,expression:"!resId"}],staticClass:"center",staticStyle:{"line-height":"480px"}},[e._v(" \n            请选择资源\n        ")]),e._v(" "),a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:e.resId,expression:"resId"}],attrs:{type:"border-card"},model:{value:e.activeFlies,callback:function(t){e.activeFlies=t},expression:"activeFlies"}},e._l(e.files,function(t){return a("el-tab-pane",{key:t.fileId,attrs:{name:t.fileId,label:t.fileName}},[a("div",{staticClass:"tpl-sl-video-box"},[a("video",{ref:t.fileId,refInFor:!0,attrs:{src:e.makeUrl(t.path),autoplay:"",controls:"",height:"100%",width:"100%"}})])])})),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.resId,expression:"resId"}],staticStyle:{padding:"10px"}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"我要提问",name:"1"}},[a("el-input",{attrs:{type:"textarea",autofocus:"",rows:5,resize:"none",maxlength:1e3,autosize:{minRows:4,maxRows:8},placeholder:"请输入1000字以内的问题"},model:{value:e.question,callback:function(t){e.question="string"==typeof t?t.trim():t},expression:"question"}}),e._v(" "),a("div",{staticClass:"right",staticStyle:{padding:"10px 0"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("提交")])],1)],1)],1),e._v(" "),a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"学生答疑",name:"1"}},[e._l(e.questionList,function(t){return a("div",{key:t.id,staticClass:"tpl-sl-notice-item"},[a("el-form",{ref:"ruleForm",refInFor:!0,staticClass:"demo-ruleForm",attrs:{model:e.backForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"学生提问："}},[a("pre",{staticStyle:{margin:"0"}},[e._v(e._s(t.content))])]),e._v(" "),t.slQuestionsDetailsVMList&&t.slQuestionsDetailsVMList.length>0?a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"教师回复："}},e._l(t.slQuestionsDetailsVMList,function(t){return a("pre",{key:t.id,staticStyle:{margin:"0"}},[e._v(e._s(t.content))])})):e._e(),e._v(" "),2!=e.$store.state.userType&&t.slQuestionsDetailsVMList&&0==t.slQuestionsDetailsVMList.length?a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"教师回复："}},[e._v("暂无回复")]):e._e(),e._v(" "),2==e.$store.state.userType&&t.slQuestionsDetailsVMList&&0==t.slQuestionsDetailsVMList.length?a("el-form-item",{attrs:{label:"教师回复："}},[a("el-input",{attrs:{type:"textarea",autofocus:"",rows:4,resize:"none",maxlength:1e3,autosize:{minRows:4,maxRows:8},placeholder:"请输入1000字以内的内容"},model:{value:e.backForm.anwser,callback:function(t){e.backForm.anwser="string"==typeof t?t.trim():t},expression:"backForm.anwser"}})],1):e._e()],1),e._v(" "),2==e.$store.state.userType&&t.slQuestionsDetailsVMList&&0==t.slQuestionsDetailsVMList.length?a("div",{staticClass:"right",staticStyle:{"padding-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",loading:e.addMoreLoading}},[e._v("回复")])],1):e._e()],1)}),e._v(" "),e.isempty?e._e():a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.handleMore}},[e._v("加载更多")])],2)],1)],1)],1),e._v(" "),a("div",{staticClass:"tpl-sl-details-body-right"},[a("el-tree",{staticStyle:{border:"0",height:"100%"},attrs:{data:e.catalogTreeData,"node-key":"id",props:e.defaultProps,"default-expanded-keys":[e.defaultKey],"current-node-key":e.defaultKey,"render-content":e.renderContent,"highlight-current":"","default-expand-all":!1},on:{"node-click":e.handleNodeClick}})],1)])},staticRenderFns:[]}},LtPg:function(e,t,a){var s=a("VU/8")(a("sSSR"),a("bXiq"),function(e){a("OBDF")},"data-v-18a96af0",null);e.exports=s.exports},NE2S:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("bOdI"),i=a.n(s),r=a("fv5m");t.default={data:function(){var e;return e={activeName:"1",showvideo:!1,question:"",tableData:[],backForm:{anwser:""},filesurl:r.a},i()(e,"activeName","1"),i()(e,"activeFlies",""),i()(e,"question",""),i()(e,"defaultKey",""),i()(e,"addMoreLoading",!1),i()(e,"catalogTreeData",[]),i()(e,"isempty",!1),i()(e,"data",{}),i()(e,"name",""),i()(e,"start",1),i()(e,"resId",""),i()(e,"files",[]),i()(e,"questionList",[]),i()(e,"backForm",{anwser:""}),i()(e,"defaultProps",{children:"resourceInfoVM",label:"name"}),i()(e,"rules",{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}]}),i()(e,"currentData",{}),e},created:function(){this.init()},methods:{init:function(){var e=JSON.parse(window.sessionStorage.getItem("_course_data"));this.data=e||{},this.name=e.courseName,this.getKw()},getKw:function(){var e=this;a.i(r.b)({courseValue:this.data.courseValue,gradeValue:this.data.gradeValue}).then(function(t){t&&t.forEach(function(e,t){e.selected=!1}),e.tableData=t||[]})},handleRowClick:function(e,t,s){var i=this;e.selected=!0,this.currentData=e,this.showvideo=!this.showvideo,this.questionList=[],this.resId="",this.start=1,e.objId&&(this.resId=e.resId||"",a.i(r.c)(e.objId).then(function(e){i.files=e.files||[],i.activeFlies=i.files.length>0?i.files[0].fileId:"",i.getvideo()}),this.getQuestion())},getvideo:function(e){var t=this;a.i(r.d)().then(function(e){var s="",i="";e.allYearAndTermVMs&&e.allYearAndTermVMs.forEach(function(e,t){1==e.current&&(s=e.year)}),e.unitSchoolTermRHVM&&(i=e.unitSchoolTermRHVM.schoolTerm);var n={yearId:s,termId:i,courseValue:t.data.courseValue,resId:t.currentData.resId,resName:t.currentData.resName};1!=t.currentData.flag&&t.$nextTick(function(){var e=t.$refs[t.activeFlies][0];e.onplay=function(){var l=e.duration,o=parseInt(1e3*l/10),d=parseInt(e.currentTime);!function(l,o,d){var c=setInterval(function(){var o=parseInt(e.currentTime),u=e.ended;if(o!=d){n.second=parseInt(o-d),n.catelogName=t.currentData.parentName,n.catelogId=t.currentData.parentId,a.i(r.e)(n).then(function(e){});var h={yearId:s,termId:i,fileId:t.activeFlies,second:parseInt(o-d),percentage:parseInt(o/l*100),resId:t.currentData.resId,resName:t.currentData.resName};a.i(r.f)(h).then(function(e){})}u&&(n.typeId=1,n.catalogId=t.currentData.parentId,a.i(r.g)(n).then(function(e){})),(u||o>=l||o==d)&&clearInterval(c),d=o},o)}(l,o,d)}})}).catch(function(e){})},handleChangeWK:function(e){var t=this;e.selected=!0,this.currentData=e,this.questionList=[],this.resId="",this.start=1,e.objId&&(this.resId=e.resId||"",a.i(r.c)(e.objId).then(function(e){t.files=e.files||[],t.activeFlies=t.files.length>0?t.files[0].fileId:"",t.getvideo()}),this.getQuestion())},makeUrl:function(e){var t=e.split(".");t.length>0&&(t[t.length-1]="mp4");var a=t.join(".");return this.filesurl+a},handleSave:function(){var e=this,t={content:this.question,courseValue:this.data.courseValue,courseName:this.data.courseName,resId:this.resId};t.content&&a.i(r.h)(t).then(function(t){e.$notify({title:"成功",message:"提交成功！",type:"success"}),e.question="",e.start=1,e.getQuestion()})},handleMore:function(){this.start++,this.getQuestion()},getQuestion:function(){var e=this;this.resId&&(this.addMoreLoading=!0,a.i(r.i)({resId:this.resId,start:this.start,size:10}).then(function(t){t.list&&t.list.forEach(function(t,a){var s=!0;e.questionList.forEach(function(e,a){e.id==t.id&&(s=!1)}),s&&e.questionList.push(t)}),e.isempty=0==t.list.length,e.addMoreLoading=!1}).catch(function(t){e.addMoreLoading=!1}))},handleNodeClick:function(e){var t=this;this.currentData=e,this.questionList=[],this.resId="",this.start=1,e.objId&&(this.resId=e.resId||"",a.i(r.c)(e.objId).then(function(e){t.files=e.files||[],t.activeFlies=t.files.length>0?t.files[0].fileId:""}),this.getQuestion())},renderContent:function(e,t){var a=t.node,s=t.data;return t.store,e("span",{style:"padding: 5px 0;"},[e("span",null,[e("i",{style:{display:1!=a.level?"none":"",fontSize:"16px",position:"relative",top:"2px"},class:{fa:!0,"fa-folder-o":!a.expanded,"fa-folder-open-o":a.expanded},attrs:{"aria-hidden":"true"}},[]),e("span",{style:{display:"rc"!=s.type?"none":"inline-block",width:"36px",height:"36px",verticalAlign:"middle"}},[e("img",{style:"width: 100%;height: 100%;border-radius: 3px;",attrs:{src:photourl+s.userId}},[])]),e("span",null,[" ",s.name])])])},getCatalogTree:function(){var e=this;getResorceInformation({courseValue:this.data.courseValue,gradeValue:this.data.gradeValue}).then(function(t){t&&t.forEach(function(e,t){e.resourceInfoVM&&e.resourceInfoVM.forEach(function(t,a){t.name=t.resName,t.type="rc",t.id=t.resId,t.parentId=e.id,t.parentName=e.name})}),e.defaultKey=e.data.resId,e.catalogTreeData=e.data2tree(t)}).catch(function(e){})},data2tree:function(e,t,a){t||(t="id"),a||(a="parentId");for(var s=[],r=0;r<e.length;r++){var n=_.cloneDeep(e[r]);(n[a+""]||""==n[a+""])&&_.result(_.find(e,i()({},t,n[a+""])),t)||(function s(i){for(var r=[],n=0;n<e.length;n++){var l=_.cloneDeep(e[n]);l[a+""]==i[t+""]&&(r.push(l),s(l))}r.length&&(i.resourceInfoVM=r)}(n),s.push(n))}return s}}}},OBDF:function(e,t){},P3Sl:function(e,t){},P8O2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,i=a("bOdI"),r=a.n(i),n=a("uybt"),l=a.n(n),o=a("fv5m");t.default={components:{hw:l.a},data:function(){return{expened:!0,rcType:null,activeName:"1",objId:"",defaultKey:"",examId:"",catalogTreeData:[],question:"",backForm:{anwser:""},defaultProps:{children:"resourceInfoVM",label:"name"},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择活动区域",trigger:"change"}],date1:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],date2:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],type:[{type:"array",required:!0,message:"请至少选择一个活动性质",trigger:"change"}],resource:[{required:!0,message:"请选择活动资源",trigger:"change"}],desc:[{required:!0,message:"请填写活动形式",trigger:"blur"}]},data:{},name:""}},created:function(){this.init()},methods:(s={init:function(){var e=JSON.parse(window.sessionStorage.getItem("_course_data"));this.data=e||{},this.name=e.courseName,this.getCatalogTree()},handleNodeClick:function(e){},handleComplated:function(e){}},r()(s,"handleNodeClick",function(e){this.rcType=null,this.questionList=[],this.resId="",this.start=1,"rc"==e.sltype&&(this.resId=e.resId||"",this.rcType=e.type,this.objId=2==e.type?e.objId:e.examId,this.examId=e.examId||"")}),r()(s,"renderContent",function(e,t){var a=t.node,s=t.data;return t.store,e("span",{style:"padding: 5px 0;"},[e("span",null,[e("i",{style:{display:1!=a.level?"none":"",fontSize:"16px",position:"relative",top:"2px"},class:{fa:!0,"fa-folder-o":!a.expanded,"fa-folder-open-o":a.expanded},attrs:{"aria-hidden":"true"}},[]),e("span",{style:{display:"rc"!=s.sltype?"none":"inline-block",width:"36px",height:"36px",verticalAlign:"middle"}},[e("img",{style:"width: 100%;height: 100%;border-radius: 3px;",attrs:{src:o.j+s.userId}},[])]),e("span",null,[" ",s.name])])])}),r()(s,"getCatalogTree",function(){var e=this;a.i(o.m)({courseValue:this.data.courseValue,gradeValue:this.data.gradeValue}).then(function(t){t&&t.forEach(function(e,a){e.resourceInfoVM&&e.resourceInfoVM.forEach(function(e,t){e.name=e.resName,e.sltype="rc",e.id=e.resId}),e.parentId||e.resourceInfoVM&&e.resourceInfoVM.forEach(function(a,s){a.name=a.resName,a.sltype="rc",a.parentId=e.id,t.push(a)})}),e.defaultKey=e.data.resId,e.catalogTreeData=e.data2tree(t)}).catch(function(e){})}),r()(s,"data2tree",function(e,t,a){t||(t="id"),a||(a="parentId");for(var s=[],i=0;i<e.length;i++){var n=_.cloneDeep(e[i]);(n[a+""]||""==n[a+""])&&_.result(_.find(e,r()({},t,n[a+""])),t)||(function s(i){for(var r=[],n=0;n<e.length;n++){var l=_.cloneDeep(e[n]);l[a+""]==i[t+""]&&(r.push(l),s(l))}r.length&&(i.resourceInfoVM=r)}(n),s.push(n))}return s}),s)}},UX6t:function(e,t,a){var s=a("VU/8")(a("2GYw"),a("+hVb"),function(e){a("AY49")},null,null);e.exports=s.exports},WsJK:function(e,t,a){var s=a("VU/8")(a("NE2S"),a("FRCh"),function(e){a("zXOQ")},"data-v-1cc6d8d6",null);e.exports=s.exports},Z6kY:function(e,t,a){var s=a("VU/8")(a("zKdP"),a("Kipu"),function(e){a("zYz6")},"data-v-650f4d08",null);e.exports=s.exports},bXiq:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sy-app-container sy-sl-student-details",staticStyle:{overflow:"auto"}},[a("h2",{staticClass:"center sy-theme-lightBackground",staticStyle:{margin:"10px auto","line-height":"40px","max-width":"1366px"}},[e._v(e._s(e.name)+"\n        "),a("el-button",{staticStyle:{float:"right","margin-top":"6px"},attrs:{type:""},on:{click:e.handleBack}},[e._v("返回")])],1),e._v(" "),a("ul",{staticClass:"center tpl-sl-details"},[a("li",{style:{"font-size":e.active.lbkc?"22px":"16px",color:e.active.lbkc?"#13CE66":"#666"},on:{click:function(t){e.handleChange("lbkc")}}},[a("i",{staticClass:"fa fa-video-camera",attrs:{"aria-hidden":"true"}}),e._v(" "),a("span",[e._v("录播课堂")])]),e._v(" "),e._m(0),e._v(" "),a("li",{style:{"font-size":e.active.khlx?"22px":"16px",color:e.active.khlx?"#13CE66":"#666"},on:{click:function(t){e.handleChange("khlx")}}},[a("i",{staticClass:"fa fa-wpforms",attrs:{"aria-hidden":"true"}}),e._v(" "),a("span",[e._v("课后练习")])]),e._v(" "),e._m(1),e._v(" "),a("li",{style:{"font-size":e.active.zsdwk?"22px":"16px",color:e.active.zsdwk?"#13CE66":"#666"},on:{click:function(t){e.handleChange("zsdwk")}}},[a("i",{staticClass:"fa fa-life-ring",attrs:{"aria-hidden":"true"}}),e._v(" "),a("span",[e._v("知识点微课")])]),e._v(" "),e._m(2),e._v(" "),a("li",{style:{"font-size":e.active.ctgg?"22px":"16px",color:e.active.ctgg?"#13CE66":"#666"},on:{click:function(t){e.handleChange("ctgg")}}},[a("i",{staticClass:"fa fa-calendar-times-o",attrs:{"aria-hidden":"true"}}),e._v(" "),a("span",[e._v("错题巩固")])])]),e._v(" "),a("div",[e.active.lbkc?a("lbkc"):e._e(),e._v(" "),e.active.khlx?a("khlx"):e._e(),e._v(" "),e.active.zsdwk?a("zbwk"):e._e(),e._v(" "),e.active.ctgg?a("error"):e._e()],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowTopBtn,expression:"isShowTopBtn"}],staticClass:"goTop4 sy-theme-background",attrs:{title:"返回顶部"},on:{click:e.backTop}},[a("span",{staticClass:"el-icon-arrow-up"})])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("hr")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("hr")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("hr")])}]}},cy0F:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tpl-sl-details-body"},[a("div",{staticClass:"tpl-sl-details-body-left",style:{"margin-right":e.expened?"230px":"0px"}},[a("hw",{attrs:{"res-id":e.objId},on:{complated:e.handleComplated}}),e._v(" "),e.rcType?e._e():a("div",{directives:[{name:"show",rawName:"v-show",value:!e.resId,expression:"!resId"}],staticClass:"center",staticStyle:{"line-height":"480px"}},[e._v(" \n            请选择资源\n        ")])],1),e._v(" "),a("div",{staticClass:"tpl-sl-details-body-right",style:{width:e.expened?"230px":"0px",padding:e.expened?"5px":"0px"}},[a("div",{staticClass:"tpl-sl-details-body-right-btn sy-theme-background",style:{visibility:e.expened?"hidden":"visible"},on:{click:function(t){e.expened=!e.expened}}},[a("i",{staticClass:"fa",class:["fa-angle-double-"+(e.expened?"right":"left")],attrs:{"aria-hidden":"true"}})]),e._v(" "),a("div",{staticStyle:{overflow:"hidden"}},[a("el-tree",{staticStyle:{border:"0",height:"100%"},attrs:{data:e.catalogTreeData,"node-key":"id",props:e.defaultProps,"default-expanded-keys":[e.defaultKey],"current-node-key":e.defaultKey,"render-content":e.renderContent,"highlight-current":"","default-expand-all":!1},on:{"node-click":e.handleNodeClick}})],1)])])},staticRenderFns:[]}},sSSR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Z6kY"),i=a.n(s),r=a("UX6t"),n=a.n(r),l=a("WsJK"),o=a.n(l),d=a("8rda"),c=a.n(d);t.default={components:{lbkc:i.a,khlx:n.a,zbwk:o.a,error:c.a},data:function(){return{isShowTopBtn:!1,name:"",active:{lbkc:!1,khlx:!1,zsdwk:!1,ctgg:!1},data:{},catalogTreeData:[]}},created:function(){this.$parent.$emit("currentPage","/sl/home/stustudy"),this.init()},methods:{init:function(){var e=JSON.parse(window.sessionStorage.getItem("_course_data"));this.data=e||{},this.name=e.courseName,this.$route.query.key?this.active[this.$route.query.key]=!0:this.active.lbkc=!0},handleBack:function(){history.go(-1)},handleChange:function(e){for(var t in this.active)t==e?(this.active[t]=!0,this.$router.push({path:"/sl/details",query:{key:t}})):this.active[t]=!1},backTop:function(){this.$el&&this.$scrollTo(this.$el,0)}},mounted:function(){var e=this;this.$el&&(this.$el.onscroll=function(){e.$el.scrollTop>10?e.isShowTopBtn=!0:e.isShowTopBtn=!1})}}},zKdP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("bOdI"),i=a.n(s),r=a("fv5m");t.default={data:function(){return{filesurl:r.a,activeName:"1",activeFlies:"",question:"",defaultKey:"",addMoreLoading:!1,catalogTreeData:[],isempty:!1,data:{},name:"",start:1,resId:"",files:[],questionList:[],backForm:{anwser:""},defaultProps:{children:"resourceInfoVM",label:"name"},currentData:{},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择活动区域",trigger:"change"}],date1:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],date2:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],type:[{type:"array",required:!0,message:"请至少选择一个活动性质",trigger:"change"}],resource:[{required:!0,message:"请选择活动资源",trigger:"change"}],desc:[{required:!0,message:"请填写活动形式",trigger:"blur"}]}}},created:function(){this.init()},methods:{init:function(){var e=JSON.parse(window.sessionStorage.getItem("_course_data"));this.data=e||{},this.name=e.courseName,this.getCatalogTree()},makeUrl:function(e){var t=e.split(".");t.length>0&&(t[t.length-1]="mp4");var a=t.join(".");return this.filesurl+a},handleSave:function(){var e=this,t={content:this.question,courseValue:this.data.courseValue,courseName:this.data.courseName,resId:this.resId};t.content&&a.i(r.h)(t).then(function(t){e.$notify({title:"成功",message:"提交成功！",type:"success"}),e.question="",e.start=1,e.getQuestion()})},handleMore:function(){this.start++,this.getQuestion()},getQuestion:function(){var e=this;this.resId&&(this.addMoreLoading=!0,a.i(r.i)({resId:this.resId,start:this.start,size:10}).then(function(t){t.list&&t.list.forEach(function(t,a){var s=!0;e.questionList.forEach(function(e,a){e.id==t.id&&(s=!1)}),s&&e.questionList.push(t)}),e.isempty=0==t.list.length,e.addMoreLoading=!1}).catch(function(t){e.addMoreLoading=!1}))},handleNodeClick:function(e){var t=this;this.currentData=e,this.questionList=[],this.resId="",this.start=1,e.objId&&(this.resId=e.resId||"",a.i(r.c)(e.objId).then(function(e){t.files=e.files||[],t.activeFlies=t.files.length>0?t.files[0].fileId:"",t.getvideo()}),this.getQuestion())},getvideo:function(e){var t=this;a.i(r.d)().then(function(e){var s="",i="";e.allYearAndTermVMs&&e.allYearAndTermVMs.forEach(function(e,t){1==e.current&&(s=e.year)}),e.unitSchoolTermRHVM&&(i=e.unitSchoolTermRHVM.schoolTerm);var n={yearId:s,termId:i,courseValue:t.data.courseValue,resId:t.currentData.resId,resName:t.currentData.resName};1!=t.currentData.flag&&t.$nextTick(function(){var e=t.$refs[t.activeFlies][0];e.onplay=function(){var l=e.duration,o=parseInt(1e3*l/10),d=parseInt(e.currentTime);!function(l,o,d){var c=setInterval(function(){var o=parseInt(e.currentTime),u=e.ended;if(o!=d){n.second=parseInt(o-d),n.catelogName=t.currentData.parentName,n.catelogId=t.currentData.parentId,a.i(r.e)(n).then(function(e){});var h={yearId:s,termId:i,fileId:t.activeFlies,second:parseInt(o-d),percentage:parseInt(o/l*100),resId:t.currentData.resId,resName:t.currentData.resName};a.i(r.f)(h).then(function(e){})}u&&(n.typeId=1,n.catalogId=t.currentData.parentId,a.i(r.g)(n).then(function(e){})),(u||o>=l||o==d)&&clearInterval(c),d=o},o)}(l,o,d)}})}).catch(function(e){})},renderContent:function(e,t){var a=t.node,s=t.data;return t.store,e("span",{style:"padding: 5px 0;position: relative;"},[e("span",null,[e("i",{style:{display:1!=a.level?"none":"",fontSize:"16px",position:"relative",top:"2px"},class:{fa:!0,"fa-folder-o":!a.expanded,"fa-folder-open-o":a.expanded},attrs:{"aria-hidden":"true"}},[]),e("span",{style:{display:"rc"!=s.type?"none":"inline-block",width:"36px",height:"36px",verticalAlign:"middle"}},[e("img",{style:"width: 100%;height: 100%;border-radius: 3px;",attrs:{src:r.j+s.userId}},[])]),e("span",{attrs:{title:s.name}},[" ",s.name.slice(0,18)]),e("span",{style:{display:"rc"!=s.type?"none":"inline-block"}},[e("i",{directives:[{name:"if",value:"item.flag == 0"}],style:"color: #13CE66",class:"fa fa-check-circle",attrs:{"aria-hidden":"true"}},[])])])])},getCatalogTree:function(){var e=this;a.i(r.k)({courseValue:this.data.courseValue,gradeValue:this.data.gradeValue}).then(function(t){t&&t.forEach(function(e,t){e.resourceInfoVM&&e.resourceInfoVM.forEach(function(t,a){t.name=t.resName,t.type="rc",t.id=t.resId,t.parentId=e.id,t.parentName=e.name})}),e.defaultKey=e.data.resId,e.catalogTreeData=e.data2tree(t)}).catch(function(e){})},data2tree:function(e,t,a){t||(t="id"),a||(a="parentId");for(var s=[],r=0;r<e.length;r++){var n=_.cloneDeep(e[r]);(n[a+""]||""==n[a+""])&&_.result(_.find(e,i()({},t,n[a+""])),t)||(function s(i){for(var r=[],n=0;n<e.length;n++){var l=_.cloneDeep(e[n]);l[a+""]==i[t+""]&&(r.push(l),s(l))}r.length&&(i.resourceInfoVM=r)}(n),s.push(n))}return s}}}},zXOQ:function(e,t){},zYz6:function(e,t){}});